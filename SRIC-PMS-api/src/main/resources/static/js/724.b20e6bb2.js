"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[724],{8942:function(e,a,l){l.d(a,{BU:function(){return n},C6:function(){return d},DO:function(){return o},P2:function(){return u},UB:function(){return r},Ym:function(){return m},dP:function(){return c},r$:function(){return i},r3:function(){return s}});var t=l(9470);function u(e){return(0,t.Jt)("/resourcesManage/getResourcesCategoryManageDataList",e)}function r(e){return(0,t.Jt)("/resources/getResourcesCategoryList",e)}function s(e){return(0,t.bE)("/resourcesManage/addOrUpdateResourcesCategory",e)}function o(e){return(0,t.Jt)("/resourcesManage/getResourcesManageList",e)}function n(e){return(0,t.bE)("/resourcesManage/editResourcesMessage",e)}function c(e){return(0,t.Jt)("/resourcesManage/checkResourcesName",e)}function i(e,a){return(0,t.jT)("/resourcesManage/uploadResources",e,a)}function d(e){return(0,t.Jt)("/resources/getResourcesList",e)}function m(e){return(0,t.PE)("/resources/downloadResources",e)}},1506:function(e,a,l){l.d(a,{y:function(){return t}});const t=[{value:"1",label:"#c93f38"},{value:"2",label:"#e56e24"},{value:"3",label:"#eec400"},{value:"4",label:"#a59344"},{value:"5",label:"#76b583"},{value:"6",label:"#008a60"},{value:"7",label:"#65a7dd"},{value:"8",label:"#00035b"},{value:"9",label:"#7249d6"},{value:"10",label:"#9c52f2"}]},6724:function(e,a,l){l.r(a),l.d(a,{default:function(){return y}});l(4114);var t=l(6768),u=l(4232),r=l(144),s=l(1387),o=l(8942),n=l(1506),c=l(236),i=l(1219),d=l(8374);const m={class:"common-body-set-width"},g={class:"resources-upload-title-div"},p={class:"resources-upload-back-button-text"},v={class:"resources-upload-title-h1"},f={class:"el-upload__text"},b={class:"resources-upload-tip"};var k=(0,t.pM)({__name:"ResourcesUpload",setup(e){const{t:a}=d.A.global,l=(0,s.rd)(),k=(0,r.KR)(!1),_=(0,r.KR)(),y=(0,r.KR)([]),F=(0,r.Kh)({name:"",level:"",category:""}),h=(0,r.KR)(),R=(0,r.Kh)({name:[{required:!0,message:a("rules.name"),trigger:"blur"}],level:[{required:!0,message:a("rules.permissionLevel"),trigger:"blur"}],category:[{required:!0,message:a("rules.category"),trigger:"blur"}]}),L=(0,r.KR)([]),$=()=>{l.push({name:"ResourcesManage",path:"/ResourcesManage"})},w=async()=>{try{const e=await(0,o.P2)({});L.value=e.data}catch{}};(0,t.sV)((()=>{w()}));const C=e=>{_.value?.clearFiles();const a=e[0];a.uid=(0,c.G$)(),_.value?.handleStart(a)},M=async e=>{if(y.value.length){try{const e={name:F.name},l=await(0,o.dP)(e);if(400==l.data.code)return void(0,i.nk)({message:a("static.nameHasBeenUsed"),type:"warning"})}catch{}e&&await e.validate(((e,a)=>{e?_.value?.submit():console.log("error submit!",a)}))}else(0,i.nk)({message:a("static.pleaseUploadFile"),type:"warning"})},U=async e=>{k.value=!0;try{const t={name:F.name,level:F.level,category:F.category},u=await(0,o.r$)(t,e.file);200==u.data.code?((0,i.nk)({message:a("static.uploadSuccess"),type:"success"}),l.push({name:"ResourcesManage",path:"/ResourcesManage"})):400==u.data.code?(0,i.nk)({message:a("static.uploadFailed"),type:"warning"}):(0,i.nk)({message:a("static.paramsError"),type:"error"})}catch{}};return(e,a)=>{const l=(0,t.g2)("Back"),s=(0,t.g2)("el-icon"),o=(0,t.g2)("el-button"),c=(0,t.g2)("el-input"),i=(0,t.g2)("el-form-item"),d=(0,t.g2)("el-tag"),w=(0,t.g2)("el-option"),V=(0,t.g2)("el-select"),K=(0,t.g2)("el-form"),E=(0,t.g2)("upload-filled"),J=(0,t.g2)("el-upload"),P=(0,t.g2)("CircleCheckFilled"),W=(0,t.g2)("el-card");return(0,t.uX)(),(0,t.CE)("div",m,[(0,t.bF)(W,null,{default:(0,t.k6)((()=>[(0,t.Lk)("div",g,[(0,t.bF)(o,{type:"info",onClick:$,plain:""},{default:(0,t.k6)((()=>[(0,t.bF)(s,{size:"20"},{default:(0,t.k6)((()=>[(0,t.bF)(l)])),_:1}),(0,t.Lk)("p",p,(0,u.v_)(e.$t("common.back")),1)])),_:1}),(0,t.Lk)("h1",v,(0,u.v_)(e.$t("static.uploadResourcesFile")),1)]),(0,t.bF)(K,{ref_key:"resourcesUploadFormRef",ref:h,model:F,rules:R},{default:(0,t.k6)((()=>[(0,t.bF)(i,{prop:"name"},{default:(0,t.k6)((()=>[(0,t.Lk)("h1",null,(0,u.v_)(e.$t("common.name")),1),(0,t.bF)(c,{modelValue:F.name,"onUpdate:modelValue":a[0]||(a[0]=e=>F.name=e),maxlength:"30","show-word-limit":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(i,{prop:"level"},{default:(0,t.k6)((()=>[(0,t.Lk)("h1",null,(0,u.v_)(e.$t("static.permissionLevel")),1),(0,t.bF)(V,{modelValue:F.level,"onUpdate:modelValue":a[1]||(a[1]=e=>F.level=e)},{label:(0,t.k6)((({value:a})=>[(0,t.Lk)("span",null,(0,u.v_)(e.$t("static.permissionLevel"))+" : "+(0,u.v_)(a),1)])),default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,r.R1)(n.y),((a,l)=>((0,t.uX)(),(0,t.Wv)(w,{key:l,label:a.label,value:a.value},{default:(0,t.k6)((()=>[(0,t.bF)(d,{color:a.label,class:"resources-upload-select-color-tag",size:"small"},null,8,["color"]),(0,t.Lk)("span",{style:(0,u.Tr)({color:a.label})},(0,u.v_)(e.$t("static.permissionLevel"))+" : "+(0,u.v_)(a.value),5)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(i,{prop:"category"},{default:(0,t.k6)((()=>[(0,t.Lk)("h1",null,(0,u.v_)(e.$t("common.category")),1),(0,t.bF)(V,{modelValue:F.category,"onUpdate:modelValue":a[2]||(a[2]=e=>F.category=e)},{default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(L.value,((e,a)=>((0,t.uX)(),(0,t.Wv)(w,{key:a,label:e.name,value:e.id},{default:(0,t.k6)((()=>[(0,t.Lk)("span",{style:(0,u.Tr)({color:e.name})},(0,u.v_)(e.name),5)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model","rules"]),(0,t.bF)(J,{class:"resources-upload-el-upload",ref_key:"uploadRef",ref:_,"file-list":y.value,"onUpdate:fileList":a[3]||(a[3]=e=>y.value=e),drag:"",action:"","auto-upload":!1,limit:1,"on-exceed":C,"http-request":U},{tip:(0,t.k6)((()=>[(0,t.Lk)("div",b,(0,u.v_)(e.$t("static.newFileWillCover")),1)])),default:(0,t.k6)((()=>[(0,t.bF)(s,{class:"el-icon--upload"},{default:(0,t.k6)((()=>[(0,t.bF)(E)])),_:1}),(0,t.Lk)("div",f,[(0,t.eW)((0,u.v_)(e.$t("static.dropFileHere"))+" "+(0,u.v_)(e.$t("common.or"))+" ",1),(0,t.Lk)("em",null,(0,u.v_)(e.$t("static.clickToUpload")),1)])])),_:1},8,["file-list"]),(0,t.bF)(o,{onClick:a[4]||(a[4]=e=>M(h.value)),type:"success",loading:k.value},{default:(0,t.k6)((()=>[(0,t.bF)(s,{class:"resources-upload-submit-button-icon",size:"15"},{default:(0,t.k6)((()=>[(0,t.bF)(P)])),_:1}),(0,t.eW)(" "+(0,u.v_)(e.$t("common.submit")),1)])),_:1},8,["loading"])])),_:1})])}}});const _=k;var y=_}}]);
//# sourceMappingURL=724.b20e6bb2.js.map