"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[993],{6096:function(e,a,t){t.d(a,{Cb:function(){return u},HE:function(){return i},bH:function(){return r},d3:function(){return s},jS:function(){return c},m4:function(){return o},sC:function(){return d},uz:function(){return n}});var l=t(9470);function r(e){return(0,l.Jt)("/libraryManage/getLibraryCategoryManageDataList",e)}function n(e){return(0,l.Jt)("/library/getLibraryCategoryList",e)}function i(e){return(0,l.bE)("/libraryManage/addOrUpdateLibraryCategory",e)}function u(e){return(0,l.Jt)("/library/getLibraryList",e)}function d(e){return(0,l.Jt)("/library/getLibraryById",e)}function o(e){return(0,l.bE)("/libraryManage/editLibraryData",e)}function s(e){return(0,l.bE)("/libraryManage/addLibrary",e)}function c(e){return(0,l.bE)("/libraryManage/editLibraryMessage",e)}},7993:function(e,a,t){t.r(a),t.d(a,{default:function(){return C}});t(4114);var l=t(6768),r=t(4232),n=t(144),i=t(6096),u=t(1219),d=t(1387),o=t(8374);const s={class:"library-category-item-span"},c={class:"library-category-item-span"},g={class:"library-category-item-span"},b={class:"library-search-div"},y={class:"library-card-details"},v=["onClick"],k=["onClick"],p={class:"library-card-tag-text"},f={class:"library-pagination-div"},m={class:"library-drawer-title"},F={key:0},_={key:1},h="0";var w=(0,l.pM)({__name:"LibraryManageIndex",setup(e){const{t:a}=o.A.global,t=(0,d.rd)(),w=(0,n.KR)("min-height:"+(window.innerHeight-200)+"px;"),L=(0,n.KR)(!1),C=(0,n.KR)("200px"),K=(0,n.KR)([]),R=(0,n.KR)("0"),M=(0,n.KR)(window.innerHeight-320+"px"),x=(0,n.KR)(),E=(0,n.KR)(1),V=(0,n.KR)(0),z=(0,n.KR)([]),X=(0,n.KR)(!1),H=(0,n.KR)(!1),U=(0,n.KR)(""),S=(0,n.Kh)({title:"",category:""}),W=(0,n.KR)(),$=(0,n.Kh)({title:[{required:!0,message:a("rules.title"),trigger:"blur"}],category:[{required:!0,message:a("rules.category"),trigger:"blur"}]}),I=async()=>{try{const e=await(0,i.uz)({});K.value=e.data}catch{}},q=async()=>{try{const e={searchInput:x.value,category:R.value,page:E.value},a=await(0,i.Cb)(e);V.value=a.data.total,z.value=a.data.libraryList}catch{}};(0,l.sV)((()=>{I(),q()}));const J=e=>{R.value=e,q()},A=e=>{z.value[e].background="border-width: 5px;"},B=e=>{z.value[e].background=""},P=e=>{t.push({name:"LibraryManageReader",path:"/LibraryManageReader",query:{library:z.value[e].id}})},j=()=>{q()},D=e=>{U.value=e.id,S.title=e.title,S.category=e.category,X.value=!0,H.value=!0},Q=()=>{S.title="",S.category="",X.value=!0,H.value=!1},T=()=>{q()},N=async e=>{e&&await e.validate(((e,a)=>{e?H.value?O():G():console.log("error submit!",a)}))},O=async()=>{try{const e={id:U.value,title:S.title,category:S.category},t=await(0,i.jS)(e);200==t.data.code?(0,u.nk)({message:a("static.saveSuccess"),type:"success"}):400==t.data.code?(0,u.nk)({message:a("static.nameHasBeenUsed"),type:"warning"}):(0,u.nk)({message:a("static.paramsError"),type:"error"}),X.value=!1,q()}catch{}},G=async()=>{try{const e={title:S.title,category:S.category},l=await(0,i.d3)(e);200==l.data.code?((0,u.nk)({message:a("static.addSuccess"),type:"success"}),X.value=!1,t.push({name:"LibraryManageReader",path:"/LibraryManageReader",query:{library:l.data.id,add:"true"}})):400==l.data.code?(0,u.nk)({message:a("static.nameHasBeenUsed"),type:"warning"}):500==l.data.code?(0,u.nk)({message:a("static.createFileFailed"),type:"warning"}):(0,u.nk)({message:a("static.paramsError"),type:"error"})}catch{}},Y=()=>{window.innerWidth>800&&(L.value?(L.value=!1,C.value="200px"):(L.value=!0,C.value="75px"))},Z=()=>{w.value="min-height:"+(window.innerHeight-200)+"px;",window.innerWidth<800?(L.value=!0,C.value="75px"):(L.value=!1,C.value="200px"),ee()},ee=()=>{M.value=window.innerHeight-310+"px"};return Z(),window.addEventListener("resize",Z),(e,a)=>{const t=(0,l.g2)("Switch"),n=(0,l.g2)("el-icon"),i=(0,l.g2)("el-menu-item"),u=(0,l.g2)("Coin"),d=(0,l.g2)("Menu"),o=(0,l.g2)("el-menu"),R=(0,l.g2)("el-aside"),U=(0,l.g2)("search"),I=(0,l.g2)("el-button"),q=(0,l.g2)("el-input"),O=(0,l.g2)("el-col"),G=(0,l.g2)("Plus"),Z=(0,l.g2)("el-row"),ee=(0,l.g2)("Edit"),ae=(0,l.g2)("el-tag"),te=(0,l.g2)("el-card"),le=(0,l.g2)("el-scrollbar"),re=(0,l.g2)("el-pagination"),ne=(0,l.g2)("el-main"),ie=(0,l.g2)("el-container"),ue=(0,l.g2)("el-form-item"),de=(0,l.g2)("el-option"),oe=(0,l.g2)("el-select"),se=(0,l.g2)("CirclePlusFilled"),ce=(0,l.g2)("CircleCheckFilled"),ge=(0,l.g2)("el-form"),be=(0,l.g2)("el-drawer");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(te,null,{default:(0,l.k6)((()=>[(0,l.bF)(ie,null,{default:(0,l.k6)((()=>[(0,l.bF)(R,{width:C.value},{default:(0,l.k6)((()=>[(0,l.bF)(o,{style:(0,r.Tr)(w.value),"default-active":h,ellipsis:!1,collapse:L.value,onSelect:J},{default:(0,l.k6)((()=>[(0,l.bF)(i,{onClick:Y},{title:(0,l.k6)((()=>[(0,l.Lk)("span",s,(0,r.v_)(e.$t("common.collapse")),1)])),default:(0,l.k6)((()=>[(0,l.bF)(n,{size:25},{default:(0,l.k6)((()=>[(0,l.bF)(t)])),_:1})])),_:1}),(0,l.bF)(i,{index:"0"},{title:(0,l.k6)((()=>[(0,l.Lk)("span",c,(0,r.v_)(e.$t("common.all")),1)])),default:(0,l.k6)((()=>[(0,l.bF)(n,{size:25},{default:(0,l.k6)((()=>[(0,l.bF)(u)])),_:1})])),_:1}),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(K.value,((e,a)=>((0,l.uX)(),(0,l.Wv)(i,{key:a,index:e.id.toString()},{title:(0,l.k6)((()=>[(0,l.Lk)("span",g,(0,r.v_)(e.name),1)])),default:(0,l.k6)((()=>[(0,l.bF)(n,{size:25},{default:(0,l.k6)((()=>[(0,l.bF)(d)])),_:1})])),_:2},1032,["index"])))),128))])),_:1},8,["style","collapse"])])),_:1},8,["width"]),(0,l.bF)(ne,null,{default:(0,l.k6)((()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",b,[(0,l.bF)(Z,null,{default:(0,l.k6)((()=>[(0,l.bF)(O,{span:20},{default:(0,l.k6)((()=>[(0,l.bF)(q,{modelValue:x.value,"onUpdate:modelValue":a[0]||(a[0]=e=>x.value=e),placeholder:"search"},{append:(0,l.k6)((()=>[(0,l.bF)(I,{onClick:j},{default:(0,l.k6)((()=>[(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.bF)(U)])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(O,{span:4},{default:(0,l.k6)((()=>[(0,l.bF)(I,{onClick:Q,class:"library-add-button",type:"danger"},{default:(0,l.k6)((()=>[(0,l.bF)(n,{size:"15"},{default:(0,l.k6)((()=>[(0,l.bF)(G)])),_:1})])),_:1})])),_:1})])),_:1})]),(0,l.bF)(le,{height:M.value},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(z.value,((e,a)=>((0,l.uX)(),(0,l.Wv)(te,{key:a,onMouseover:e=>A(a),onMouseleave:e=>B(a),style:(0,r.Tr)(e.background),class:"library-card"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",y,[(0,l.Lk)("span",{class:"library-card-name-text",onClick:e=>P(a)},(0,r.v_)(e.title),9,v),(0,l.bF)(I,{class:"library-manage-card-edit-button",type:"warning",onClick:a=>D(e)},{default:(0,l.k6)((()=>[(0,l.bF)(n,null,{default:(0,l.k6)((()=>[(0,l.bF)(ee)])),_:1})])),_:2},1032,["onClick"]),(0,l.Lk)("div",{class:"library-card-tags-div",onClick:e=>P(a)},[(0,l.Lk)("span",null,(0,r.v_)(e.filename),1),(0,l.bF)(ae,{class:"library-manage-card-tags",effect:"dark",type:"warning",size:"small"},{default:(0,l.k6)((()=>[(0,l.Lk)("span",p,(0,r.v_)(e.categoryName),1)])),_:2},1024)],8,k)])])),_:2},1032,["onMouseover","onMouseleave","style"])))),128))])),_:1},8,["height"]),(0,l.Lk)("div",f,[(0,l.bF)(re,{layout:"prev, pager, next","current-page":E.value,"onUpdate:currentPage":a[1]||(a[1]=e=>E.value=e),onCurrentChange:a[2]||(a[2]=e=>T()),"page-size":20,total:V.value,"pager-count":5,background:""},null,8,["current-page","total"])])])])),_:1})])),_:1})])),_:1}),(0,l.bF)(be,{modelValue:X.value,"onUpdate:modelValue":a[6]||(a[6]=e=>X.value=e)},{header:(0,l.k6)((()=>[(0,l.Lk)("span",m,(0,r.v_)(e.$t("static.editAndAddLibrary")),1)])),default:(0,l.k6)((()=>[(0,l.bF)(ge,{ref_key:"libraryFormRef",ref:W,model:S,rules:$},{default:(0,l.k6)((()=>[(0,l.bF)(ue,{prop:"title"},{default:(0,l.k6)((()=>[(0,l.Lk)("h1",null,(0,r.v_)(e.$t("common.title")),1),(0,l.bF)(q,{modelValue:S.title,"onUpdate:modelValue":a[3]||(a[3]=e=>S.title=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(ue,{prop:"category"},{default:(0,l.k6)((()=>[(0,l.Lk)("h1",null,(0,r.v_)(e.$t("common.category")),1),(0,l.bF)(oe,{modelValue:S.category,"onUpdate:modelValue":a[4]||(a[4]=e=>S.category=e)},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(K.value,((e,a)=>((0,l.uX)(),(0,l.Wv)(de,{key:a,label:e.name,value:e.id},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(ue,null,{default:(0,l.k6)((()=>[(0,l.bF)(I,{onClick:a[5]||(a[5]=e=>N(W.value)),type:"success"},{default:(0,l.k6)((()=>[H.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",F,[(0,l.bF)(n,{class:"library-add-button-icon",size:"15"},{default:(0,l.k6)((()=>[(0,l.bF)(se)])),_:1}),(0,l.eW)(" "+(0,r.v_)(e.$t("common.add")),1)])),H.value?((0,l.uX)(),(0,l.CE)("div",_,[(0,l.bF)(n,{class:"library-add-button-icon",size:"15"},{default:(0,l.k6)((()=>[(0,l.bF)(ce)])),_:1}),(0,l.eW)(" "+(0,r.v_)(e.$t("common.save")),1)])):(0,l.Q3)("",!0)])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])],64)}}});const L=w;var C=L}}]);
//# sourceMappingURL=993.fb0e9b86.js.map