"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[912],{4030:function(e,t,a){a.d(t,{$U:function(){return g},B6:function(){return u},FN:function(){return n},G4:function(){return c},HI:function(){return l},KB:function(){return m},KN:function(){return b},Su:function(){return p},Vv:function(){return d},Wb:function(){return k},_M:function(){return o},po:function(){return v},wI:function(){return s},xI:function(){return f},yx:function(){return i}});var r=a(9470);function n(e){return(0,r.Jt)("/projectManage/getProjectManageList",e)}function u(e){return(0,r.bE)("/projectManage/addOrUpdateProject",e)}function c(e){return(0,r.Jt)("/projectManage/getProjectManageListWithUserList",e)}function o(e){return(0,r.bE)("/projectManage/deleteProjectUser",e)}function s(e){return(0,r.bE)("/projectManage/addProjectUser",e)}function l(e){return(0,r.Jt)("/project/getProjectListWithUserList",e)}function i(e){return(0,r.Jt)("/project/getProjectByUuid",e)}function d(e){return(0,r.Jt)("/projectItem/getProjectItemListByProject",e)}function p(e){return(0,r.bE)("/projectItem/endProjectItem",e)}function v(e){return(0,r.bE)("/projectItem/pickProjectItemUser",e)}function k(e){return(0,r.bE)("/projectItem/addProjectItem",e)}function g(e){return(0,r.bE)("/projectItemManage/endProjectItemManage",e)}function m(e){return(0,r.bE)("/projectItemManage/pickProjectItemUserManage",e)}function f(e){return(0,r.bE)("/projectItemManage/addProjectItemManage",e)}function b(e){return(0,r.bE)("/projectItemManage/updateProjectItemTextManage",e)}},2912:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});var r=a(6768),n=a(4232),u=a(8355),c=a(144),o=a(4030),s=a(4864),l=a(1737),i=a(1219),d=a(8374);const p={class:"project-user-card-name"},v={class:"project-user-card-message-div"},k={style:{"margin-right":"10px"}},g={class:"project-user-card-message-icon"},m=["onMouseover","onMouseleave"],f={class:"project-user-card-users-name"},b=(0,r.Lk)("div",{style:{"flex-grow":"10"}},null,-1),j={class:"project-user-pagination-div"},_={class:"project-user-drawer-title"},y={class:"project-user-search-data-user-mail"},L={class:"project-user-delete-confirm-div"},F={class:"project-user-delete-confirm-text"},M={class:"project-user-delete-confirm-title"};var h=(0,r.pM)({__name:"ProjectUserManage",setup(e){const{t:t}=d.A.global,a=(0,l.C6J)(),h=(0,c.KR)({}),C=(0,c.KR)(1),I=(0,c.KR)(0),w=(0,c.KR)(u.A.defaults.baseURL+"/file/userAvatar/"),E=(0,c.KR)(window.innerHeight-240+"px"),U=(0,c.KR)(!1),K=(0,c.KR)(!1),P=(0,c.KR)(""),R=(0,c.KR)(""),V=(0,c.KR)(""),W=(0,c.KR)(""),$=(0,c.KR)([]),x=(0,c.KR)(""),X=async()=>{try{const e={page:C.value},t=await(0,o.G4)(e);h.value=t.data.projectList,I.value=t.data.total}catch{}};(0,r.sV)((()=>{X()}));const A=(e,t)=>{0==a.value?h.value[e].userList[t].background="background: #E5EAF3":h.value[e].userList[t].background="background: #303030"},J=(e,t)=>{h.value[e].userList[t].background=""},z=(e,t)=>{P.value=t.username,R.value=t.uuid,V.value=e.uuid,K.value=!0},B=e=>{x.value=e.uuid,U.value=!0},H=()=>{X()},S=async()=>{try{const e={keyWord:W.value},t=await(0,s.us)(e);$.value=t.data}catch{}},T=async e=>{try{const a={userUuid:e.uuid,projectUuid:x.value},r=await(0,o.wI)(a);200==r.data.code?(0,i.nk)({message:t("static.addSuccess"),type:"success"}):400==r.data.code?(0,i.nk)({message:t("static.memberHasBeenAdded"),type:"warning"}):500==r.data.code?(0,i.nk)({message:t("static.addFailed"),type:"warning"}):(0,i.nk)({message:t("static.paramsError"),type:"error"}),U.value=!1,X()}catch{}},G=()=>{K.value=!1},N=async()=>{try{const e={userUuid:R.value,projectUuid:V.value},a=await(0,o._M)(e);200==a.data.code?(0,i.nk)({message:t("static.removeSuccess"),type:"success"}):400==a.data.code?(0,i.nk)({message:t("static.removeFailed"),type:"warning"}):(0,i.nk)({message:t("static.paramsError"),type:"error"}),K.value=!1,X()}catch{}},O=()=>{E.value=window.innerHeight-240+"px"};return O(),window.addEventListener("resize",O),(e,t)=>{const a=(0,r.g2)("Unlock"),u=(0,r.g2)("el-icon"),c=(0,r.g2)("Lock"),o=(0,r.g2)("el-avatar"),s=(0,r.g2)("Delete"),l=(0,r.g2)("el-button"),i=(0,r.g2)("Plus"),d=(0,r.g2)("el-card"),R=(0,r.g2)("el-scrollbar"),V=(0,r.g2)("el-pagination"),x=(0,r.g2)("Search"),X=(0,r.g2)("el-input"),O=(0,r.g2)("el-drawer");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(d,null,{default:(0,r.k6)((()=>[(0,r.bF)(R,{height:E.value},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(h.value,((t,j)=>((0,r.uX)(),(0,r.Wv)(d,{key:j,class:"project-user-card"},{default:(0,r.k6)((()=>[(0,r.Lk)("span",p,(0,n.v_)(t.name),1),(0,r.Lk)("div",v,[(0,r.Lk)("span",k,(0,n.v_)(t.createTime),1),(0,r.Lk)("span",null,(0,n.v_)(t.description),1),(0,r.Lk)("div",g,[0==t.isEnded?((0,r.uX)(),(0,r.Wv)(u,{key:0,style:{color:"#67C23A"}},{default:(0,r.k6)((()=>[(0,r.bF)(a)])),_:1})):(0,r.Q3)("",!0),1==t.isEnded?((0,r.uX)(),(0,r.Wv)(u,{key:1,style:{color:"#F56C6C"}},{default:(0,r.k6)((()=>[(0,r.bF)(c)])),_:1})):(0,r.Q3)("",!0)])]),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(t.userList,((a,c)=>((0,r.uX)(),(0,r.CE)("div",{class:"project-user-card-users-div",key:c,onMouseover:e=>A(j,c),onMouseleave:e=>J(j,c),style:(0,n.Tr)(a.background)},[(0,r.bF)(o,{class:"project-user-card-users-avatar",src:w.value+a.avatar},null,8,["src"]),(0,r.Lk)("p",f,(0,n.v_)(a.username),1),b,(0,r.bF)(l,{class:"project-user-card-users-button",onClick:e=>z(t,a),type:"danger",round:""},{default:(0,r.k6)((()=>[(0,r.bF)(u,{size:"15"},{default:(0,r.k6)((()=>[(0,r.bF)(s)])),_:1}),(0,r.Lk)("span",null,(0,n.v_)(e.$t("static.deleteMember")),1)])),_:2},1032,["onClick"])],44,m)))),128)),(0,r.bF)(l,{class:"project-user-add-user-button",onClick:e=>B(t),type:"warning",plain:""},{default:(0,r.k6)((()=>[(0,r.bF)(u,{size:"15"},{default:(0,r.k6)((()=>[(0,r.bF)(i)])),_:1}),(0,r.Lk)("span",null,(0,n.v_)(e.$t("static.addMember")),1)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1},8,["height"]),(0,r.Lk)("div",j,[(0,r.bF)(V,{layout:"prev, pager, next","current-page":C.value,"onUpdate:currentPage":t[0]||(t[0]=e=>C.value=e),onCurrentChange:t[1]||(t[1]=e=>H()),"page-size":20,total:I.value,"pager-count":5,background:""},null,8,["current-page","total"])])])),_:1}),(0,r.bF)(O,{modelValue:U.value,"onUpdate:modelValue":t[3]||(t[3]=e=>U.value=e)},{header:(0,r.k6)((()=>[(0,r.Lk)("span",_,(0,n.v_)(e.$t("static.addMember")),1)])),default:(0,r.k6)((()=>[(0,r.Lk)("h1",null,(0,n.v_)(e.$t("common.search"))+" - "+(0,n.v_)(e.$t("static.usernameOrMail")),1),(0,r.bF)(X,{modelValue:W.value,"onUpdate:modelValue":t[2]||(t[2]=e=>W.value=e)},{append:(0,r.k6)((()=>[(0,r.bF)(l,{onClick:S},{default:(0,r.k6)((()=>[(0,r.bF)(u,{size:"15"},{default:(0,r.k6)((()=>[(0,r.bF)(x)])),_:1})])),_:1})])),_:1},8,["modelValue"]),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)($.value,((e,t)=>((0,r.uX)(),(0,r.Wv)(d,{class:"project-user-search-data-card",key:t},{default:(0,r.k6)((()=>[(0,r.bF)(l,{link:"",class:"project-user-search-data-user-name",onClick:t=>T(e)},{default:(0,r.k6)((()=>[(0,r.eW)((0,n.v_)(e.username),1)])),_:2},1032,["onClick"]),(0,r.Lk)("p",y,(0,n.v_)(e.mail),1)])),_:2},1024)))),128))])),_:1},8,["modelValue"]),(0,r.bF)(O,{modelValue:K.value,"onUpdate:modelValue":t[6]||(t[6]=e=>K.value=e),direction:"ttb"},{header:(0,r.k6)((()=>[(0,r.Lk)("h1",null,(0,n.v_)(e.$t("common.warning")),1)])),default:(0,r.k6)((()=>[(0,r.Lk)("div",L,[(0,r.Lk)("div",F,(0,n.v_)(e.$t("static.deleteMemberConfirm")),1),(0,r.Lk)("div",M,(0,n.v_)(P.value),1)])])),footer:(0,r.k6)((()=>[(0,r.bF)(l,{type:"info",plain:"",onClick:t[4]||(t[4]=e=>G())},{default:(0,r.k6)((()=>[(0,r.eW)((0,n.v_)(e.$t("common.no")),1)])),_:1}),(0,r.bF)(l,{type:"danger",onClick:t[5]||(t[5]=e=>N())},{default:(0,r.k6)((()=>[(0,r.eW)((0,n.v_)(e.$t("common.yes")),1)])),_:1})])),_:1},8,["modelValue"])],64)}}});const C=h;var I=C}}]);
//# sourceMappingURL=912.3ae4951c.js.map