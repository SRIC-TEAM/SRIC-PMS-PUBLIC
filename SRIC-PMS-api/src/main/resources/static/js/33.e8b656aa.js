"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[33],{1506:function(e,l,a){a.d(l,{y:function(){return t}});const t=[{value:"1",label:"#c93f38"},{value:"2",label:"#e56e24"},{value:"3",label:"#eec400"},{value:"4",label:"#a59344"},{value:"5",label:"#76b583"},{value:"6",label:"#008a60"},{value:"7",label:"#65a7dd"},{value:"8",label:"#00035b"},{value:"9",label:"#7249d6"},{value:"10",label:"#9c52f2"}]},3033:function(e,l,a){a.r(l),a.d(l,{default:function(){return k}});var t=a(6768),n=a(4232),r=a(144),s=a(9470);function i(e){return(0,s.Jt)("/permissionRequest/getPermissionRequestList",e)}function u(e){return(0,s.bE)("/permissionRequest/addOrUpdatePermissionRequest",e)}var o=a(9055),d=a(1506),p=a(1219),c=a(8374);const v={class:"permission-request-manage-pagination-div"},m={class:"permission-request-manage-drawer-title"};var g=(0,t.pM)({__name:"PermissionRequestManage",setup(e){const{t:l}=c.A.global,a=(0,r.KR)([]),s=(0,r.KR)(1),g=(0,r.KR)(0),b=(0,r.KR)(window.innerHeight-290+"px"),k=(0,r.KR)(!1),f=(0,r.Kh)({requestMapping:"",level:"",description:""}),_=(0,r.KR)(),h=(0,r.Kh)({requestMapping:[{required:!0,message:l("rules.interface"),trigger:"blur"}],level:[{required:!0,message:l("rules.permissionLevel"),trigger:"blur"}],description:[{required:!0,message:l("rules.description"),trigger:"blur"}]}),F=(0,r.KR)(""),q=async()=>{try{const e={page:s.value},l=await i(e);g.value=l.data.total,a.value=l.data.permissionRequestList}catch{}};(0,t.sV)((()=>{q()}));const w=()=>{q()},y=e=>{f.requestMapping=e.requestMapping,f.level=e.level,f.description=e.description,k.value=!0,F.value=e.uuid},R=()=>{f.requestMapping="",f.level="",f.description="",k.value=!0,F.value=""},L=async()=>{try{const e={uuid:F.value,requestMapping:f.requestMapping,level:f.level,description:f.description},a=await u(e);200==a.data.code?(0,p.nk)({message:l("static.submitSuccess"),type:"success"}):400==a.data.code?(0,p.nk)({message:l("static.nameHasBeenUsed"),type:"warning"}):(0,p.nk)({message:l("static.paramsError"),type:"error"}),q(),k.value=!1}catch{}},C=async e=>{e&&await e.validate(((e,l)=>{e?L():console.log("error submit!",l)}))},M=()=>{b.value=window.innerHeight-290+"px"};return window.addEventListener("resize",M),(e,l)=>{const i=(0,t.g2)("el-table-column"),u=(0,t.g2)("el-button"),p=(0,t.g2)("el-table"),c=(0,t.g2)("el-pagination"),F=(0,t.g2)("Plus"),q=(0,t.g2)("el-icon"),L=(0,t.g2)("el-card"),M=(0,t.g2)("el-input"),V=(0,t.g2)("el-form-item"),$=(0,t.g2)("el-tag"),K=(0,t.g2)("el-option"),W=(0,t.g2)("el-select"),x=(0,t.g2)("CircleCheckFilled"),E=(0,t.g2)("el-form"),U=(0,t.g2)("el-drawer");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(L,null,{default:(0,t.k6)((()=>[(0,t.bF)(p,{data:a.value,height:b.value},{default:(0,t.k6)((()=>[(0,t.bF)(i,{prop:"uuid",width:"300"},{header:(0,t.k6)((()=>[(0,t.eW)(" INTERFACE ID ")])),_:1}),(0,t.bF)(i,{prop:"requestMapping",width:"180"},{header:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(e.$t("common.interface")),1)])),_:1}),(0,t.bF)(i,{prop:"level",width:"80"},{header:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(e.$t("static.permissionLevel")),1)])),default:(0,t.k6)((e=>[(0,t.Lk)("span",{style:(0,n.Tr)((0,r.R1)(o.qY)(e.row.level))},(0,n.v_)(e.row.level),5)])),_:1}),(0,t.bF)(i,{prop:"description"},{header:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(e.$t("common.description")),1)])),_:1}),(0,t.bF)(i,{fixed:"right",label:"Operations",width:"120"},{header:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(e.$t("common.operations")),1)])),default:(0,t.k6)((l=>[(0,t.bF)(u,{link:"",type:"primary",onClick:e=>y(l.row)},{default:(0,t.k6)((()=>[(0,t.eW)((0,n.v_)(e.$t("common.edit")),1)])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","height"]),(0,t.Lk)("div",v,[(0,t.bF)(c,{layout:"prev, pager, next","current-page":s.value,"onUpdate:currentPage":l[0]||(l[0]=e=>s.value=e),onCurrentChange:l[1]||(l[1]=e=>w()),"page-size":20,total:g.value,"pager-count":5,background:""},null,8,["current-page","total"])]),(0,t.bF)(u,{onClick:l[2]||(l[2]=e=>R()),type:"warning",class:"permission-request-manage-add-button",plain:""},{default:(0,t.k6)((()=>[(0,t.bF)(q,null,{default:(0,t.k6)((()=>[(0,t.bF)(F)])),_:1}),(0,t.Lk)("span",null,(0,n.v_)(e.$t("common.add")),1)])),_:1})])),_:1}),(0,t.bF)(U,{modelValue:k.value,"onUpdate:modelValue":l[7]||(l[7]=e=>k.value=e)},{header:(0,t.k6)((()=>[(0,t.Lk)("span",m,(0,n.v_)(e.$t("static.editAndAddInterface")),1)])),default:(0,t.k6)((()=>[(0,t.bF)(E,{ref_key:"permissionRequestFormRef",ref:_,model:f,rules:h},{default:(0,t.k6)((()=>[(0,t.bF)(V,{prop:"requestMapping"},{default:(0,t.k6)((()=>[(0,t.Lk)("h1",null,(0,n.v_)(e.$t("common.interface")),1),(0,t.bF)(M,{modelValue:f.requestMapping,"onUpdate:modelValue":l[3]||(l[3]=e=>f.requestMapping=e),maxlength:"30","show-word-limit":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(V,{prop:"level"},{default:(0,t.k6)((()=>[(0,t.Lk)("h1",null,(0,n.v_)(e.$t("static.permissionLevel")),1),(0,t.bF)(W,{modelValue:f.level,"onUpdate:modelValue":l[4]||(l[4]=e=>f.level=e)},{label:(0,t.k6)((({value:l})=>[(0,t.Lk)("span",null,(0,n.v_)(e.$t("static.permissionLevel"))+" : "+(0,n.v_)(l),1)])),default:(0,t.k6)((()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)((0,r.R1)(d.y),((l,a)=>((0,t.uX)(),(0,t.Wv)(K,{key:a,label:l.label,value:l.value},{default:(0,t.k6)((()=>[(0,t.bF)($,{color:l.label,class:"permission-request-select-color-tag",size:"small"},null,8,["color"]),(0,t.Lk)("span",{style:(0,n.Tr)({color:l.label})},(0,n.v_)(e.$t("static.permissionLevel"))+" : "+(0,n.v_)(l.value),5)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.bF)(V,{prop:"description"},{default:(0,t.k6)((()=>[(0,t.Lk)("h1",null,(0,n.v_)(e.$t("common.description")),1),(0,t.bF)(M,{modelValue:f.description,"onUpdate:modelValue":l[5]||(l[5]=e=>f.description=e),rows:2,type:"textarea",maxlength:"25","show-word-limit":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,t.bF)(V,null,{default:(0,t.k6)((()=>[(0,t.bF)(u,{onClick:l[6]||(l[6]=e=>C(_.value)),type:"success"},{default:(0,t.k6)((()=>[(0,t.bF)(q,{class:"permission-request-submit-button-icon",size:"15"},{default:(0,t.k6)((()=>[(0,t.bF)(x)])),_:1}),(0,t.eW)(" "+(0,n.v_)(e.$t("common.submit")),1)])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])],64)}}});const b=g;var k=b}}]);
//# sourceMappingURL=33.e8b656aa.js.map