{"version":3,"file":"js/543.f01722e8.js","mappings":"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","sources":["webpack://front/./src/axios/api/resources.ts","webpack://front/./src/views/manage/ResourcesCategoryManage.vue?11aa","webpack://front/./src/views/manage/ResourcesCategoryManage.vue","webpack://front/./src/views/manage/ResourcesCategoryManage.vue?1078"],"sourcesContent":["import { downloadFile, get,post, postForm } from '@/axios/axios'\r\n\r\nexport function getResourcesCategoryManageDataList(params:any)\r\n{\r\n    return get('/resourcesManage/getResourcesCategoryManageDataList',params)\r\n}\r\n\r\nexport function getResourcesCategoryList(params:any)\r\n{\r\n    return get('/resources/getResourcesCategoryList',params)\r\n}\r\n\r\nexport function addOrUpdateResourcesCategory(params:any)\r\n{\r\n    return post('/resourcesManage/addOrUpdateResourcesCategory',params)\r\n}\r\n\r\nexport function getResourcesManageList(params:any)\r\n{\r\n    return get('/resourcesManage/getResourcesManageList',params)\r\n}\r\n\r\nexport function editResourcesMessage(params:any)\r\n{\r\n    return post('/resourcesManage/editResourcesMessage',params)\r\n}\r\n\r\nexport function checkResourcesName(params:any)\r\n{\r\n    return get('/resourcesManage/checkResourcesName',params)\r\n}\r\n\r\nexport function uploadResources(params: any,file: File)\r\n{\r\n    return postForm('/resourcesManage/uploadResources',params,file)\r\n}\r\n\r\nexport function getResourcesList(params: any)\r\n{\r\n    return get('/resources/getResourcesList',params)\r\n}\r\n\r\nexport function downloadResources(params: any)\r\n{\r\n    return downloadFile('/resources/downloadResources',params)\r\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"resources-category-manage-drawer-title\" }\n\nimport { ref,onMounted,reactive } from 'vue'\r\nimport { getResourcesCategoryManageDataList,addOrUpdateResourcesCategory } from '@/axios/api/resources';\r\nimport type { FormInstance } from 'element-plus'\r\nimport { ElMessage } from 'element-plus' //element消息\r\nimport i18n from '@/language';\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'ResourcesCategoryManage',\n  setup(__props) {\n\r\nconst { t } = i18n.global\r\n\r\nconst tableData = ref([]) //主页面表表格数据\r\nconst tableHeight = ref((window.innerHeight - 240) + \"px\") //表格高度\r\nconst isDrawerOpen = ref(false) //抽屉是否打开\r\nconst categoryForm = reactive //类别名称输入\r\n({\r\n    name: \"\",\r\n})\r\nconst categoryFormRef = ref<FormInstance>() //添加 resourcesCategory 表单的 ref\r\nconst categoryFormRules = reactive //添加 resourcesCategory 表单的 rule\r\n({\r\n    name:\r\n    [\r\n        { required: true, message: t(\"rules.name\"), trigger: 'blur' },\r\n    ],\r\n})\r\nconst categoryEditId = ref(0) //修改的类别 id\r\n\r\nconst getResourcesCategoryData = async () => //获取类别列表\r\n{\r\n    try\r\n    {\r\n        const resp = await getResourcesCategoryManageDataList({})\r\n        tableData.value = resp.data\r\n    } catch {}\r\n}\r\n\r\nonMounted( () =>\r\n{\r\n    getResourcesCategoryData()\r\n})\r\n\r\nconst clickEdit = (row:any) => //点击编辑按钮\r\n{\r\n    categoryForm.name = row.name\r\n    isDrawerOpen.value = true\r\n    categoryEditId.value = row.id\r\n}\r\n\r\nconst clickAdd = () => //点击新增按钮\r\n{\r\n    categoryForm.name = \"\"\r\n    isDrawerOpen.value = true\r\n    categoryEditId.value = 0\r\n}\r\n\r\nconst doAddOrEditCategory = async () =>\r\n{\r\n    try\r\n    {\r\n        const params =\r\n        {\r\n            id: categoryEditId.value,\r\n            name: categoryForm.name,\r\n        }\r\n        const resp = await addOrUpdateResourcesCategory(params)\r\n        if(resp.data.code == 200)\r\n        {\r\n            ElMessage({\r\n                message: t(\"static.submitSuccess\"),\r\n                type: 'success',\r\n            })\r\n        }\r\n        else if(resp.data.code == 400)\r\n        {\r\n            ElMessage({\r\n                message: t(\"static.nameHasBeenUsed\"),\r\n                type: 'warning',\r\n            })\r\n        }\r\n        else\r\n        {\r\n            ElMessage({\r\n                message: t(\"static.paramsError\"),\r\n                type: 'error',\r\n            })\r\n        }\r\n        getResourcesCategoryData()\r\n        isDrawerOpen.value = false\r\n    } catch {}\r\n}\r\n\r\nconst clickAddOrEditCategory = async (formEl: FormInstance | undefined) => //点击添加或修改 resourcesCategory 提交\r\n{\r\n    if (!formEl) return\r\n    await formEl.validate((valid, fields) => {\r\n        if (valid) {\r\n            doAddOrEditCategory()\r\n        } else {\r\n            console.log('error submit!', fields)\r\n        }\r\n    })\r\n}\r\n\r\nconst onWindowSizeChanged = () => //窗口大小变动\r\n{\r\n    tableHeight.value = (window.innerHeight - 240) + \"px\"\r\n}\r\n\r\nwindow.addEventListener('resize',onWindowSizeChanged) //监听窗口变动\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_table_column = _resolveComponent(\"el-table-column\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_table = _resolveComponent(\"el-table\")!\n  const _component_Plus = _resolveComponent(\"Plus\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_card = _resolveComponent(\"el-card\")!\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_CircleCheckFilled = _resolveComponent(\"CircleCheckFilled\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n  const _component_el_drawer = _resolveComponent(\"el-drawer\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_el_card, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_el_table, {\n          data: tableData.value,\n          height: tableHeight.value\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_table_column, { prop: \"id\" }, {\n              header: _withCtx(() => [\n                _createTextVNode(\" RESOURCES ID \")\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_table_column, { prop: \"name\" }, {\n              header: _withCtx(() => [\n                _createTextVNode(_toDisplayString(_ctx.$t(\"common.name\")), 1)\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_table_column, { prop: \"resourcesNumber\" }, {\n              header: _withCtx(() => [\n                _createTextVNode(_toDisplayString(_ctx.$t(\"static.itemNumber\")), 1)\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_table_column, {\n              fixed: \"right\",\n              label: \"Operations\",\n              width: \"120\"\n            }, {\n              header: _withCtx(() => [\n                _createTextVNode(_toDisplayString(_ctx.$t(\"common.operations\")), 1)\n              ]),\n              default: _withCtx((scope) => [\n                _createVNode(_component_el_button, {\n                  link: \"\",\n                  type: \"primary\",\n                  onClick: ($event: any) => (clickEdit(scope.row))\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(_toDisplayString(_ctx.$t(\"common.edit\")), 1)\n                  ]),\n                  _: 2\n                }, 1032, [\"onClick\"])\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }, 8, [\"data\", \"height\"]),\n        _createVNode(_component_el_button, {\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (clickAdd())),\n          type: \"warning\",\n          class: \"resources-category-manage-add-button\",\n          plain: \"\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_Plus)\n              ]),\n              _: 1\n            }),\n            _createElementVNode(\"span\", null, _toDisplayString(_ctx.$t(\"common.add\")), 1)\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_el_drawer, {\n      modelValue: isDrawerOpen.value,\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((isDrawerOpen).value = $event))\n    }, {\n      header: _withCtx(() => [\n        _createElementVNode(\"span\", _hoisted_1, _toDisplayString(_ctx.$t(\"static.editAndAddCategory\")), 1)\n      ]),\n      default: _withCtx(() => [\n        _createVNode(_component_el_form, {\n          ref_key: \"categoryFormRef\",\n          ref: categoryFormRef,\n          model: categoryForm,\n          rules: categoryFormRules\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_form_item, { prop: \"name\" }, {\n              default: _withCtx(() => [\n                _createElementVNode(\"h1\", null, _toDisplayString(_ctx.$t(\"common.name\")), 1),\n                _createVNode(_component_el_input, {\n                  modelValue: categoryForm.name,\n                  \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((categoryForm.name) = $event)),\n                  maxlength: \"10\",\n                  \"show-word-limit\": \"\",\n                  clearable: \"\"\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_button, {\n                  onClick: _cache[2] || (_cache[2] = ($event: any) => (clickAddOrEditCategory(categoryFormRef.value))),\n                  type: \"success\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_icon, {\n                      class: \"resources-category-manage-submit-button-icon\",\n                      size: \"15\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_CircleCheckFilled)\n                      ]),\n                      _: 1\n                    }),\n                    _createTextVNode(\" \" + _toDisplayString(_ctx.$t(\"common.submit\")), 1)\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }, 8, [\"model\", \"rules\"])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"])\n  ], 64))\n}\n}\n\n})","<template>\r\n    <el-card>\r\n        <el-table :data=\"tableData\" :height=\"tableHeight\">\r\n            <el-table-column prop=\"id\">\r\n                <template #header>\r\n                    RESOURCES ID\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"name\">\r\n                <template #header>\r\n                    {{ $t(\"common.name\") }}\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"resourcesNumber\">\r\n                <template #header>\r\n                    {{ $t(\"static.itemNumber\") }}\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column fixed=\"right\" label=\"Operations\" width=\"120\">\r\n                <template #header>\r\n                    {{ $t(\"common.operations\") }}\r\n                </template>\r\n                <template #default=\"scope\">\r\n                    <el-button link type=\"primary\" @click=\"clickEdit(scope.row)\">{{ $t(\"common.edit\") }}</el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <el-button @click=\"clickAdd()\" type=\"warning\" class=\"resources-category-manage-add-button\" plain>\r\n            <el-icon>\r\n                <Plus />\r\n            </el-icon>\r\n            <span>{{ $t(\"common.add\") }}</span>\r\n        </el-button>\r\n    </el-card>\r\n    <el-drawer v-model=\"isDrawerOpen\">\r\n        <template #header>\r\n            <span class=\"resources-category-manage-drawer-title\">{{ $t(\"static.editAndAddCategory\") }}</span>\r\n        </template>\r\n        <el-form ref=\"categoryFormRef\" :model=\"categoryForm\" :rules=\"categoryFormRules\">\r\n            <el-form-item prop=\"name\">\r\n                <h1>{{ $t(\"common.name\") }}</h1>\r\n                <el-input v-model=\"categoryForm.name\" maxlength=\"10\" show-word-limit clearable></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button @click=\"clickAddOrEditCategory(categoryFormRef)\" type=\"success\">\r\n                    <el-icon class=\"resources-category-manage-submit-button-icon\" size=\"15\">\r\n                        <CircleCheckFilled/>\r\n                    </el-icon>\r\n                    {{ $t(\"common.submit\") }}\r\n                </el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </el-drawer>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { ref,onMounted,reactive } from 'vue'\r\nimport { getResourcesCategoryManageDataList,addOrUpdateResourcesCategory } from '@/axios/api/resources';\r\nimport type { FormInstance } from 'element-plus'\r\nimport { ElMessage } from 'element-plus' //element消息\r\nimport i18n from '@/language';\r\nconst { t } = i18n.global\r\n\r\nconst tableData = ref([]) //主页面表表格数据\r\nconst tableHeight = ref((window.innerHeight - 240) + \"px\") //表格高度\r\nconst isDrawerOpen = ref(false) //抽屉是否打开\r\nconst categoryForm = reactive //类别名称输入\r\n({\r\n    name: \"\",\r\n})\r\nconst categoryFormRef = ref<FormInstance>() //添加 resourcesCategory 表单的 ref\r\nconst categoryFormRules = reactive //添加 resourcesCategory 表单的 rule\r\n({\r\n    name:\r\n    [\r\n        { required: true, message: t(\"rules.name\"), trigger: 'blur' },\r\n    ],\r\n})\r\nconst categoryEditId = ref(0) //修改的类别 id\r\n\r\nconst getResourcesCategoryData = async () => //获取类别列表\r\n{\r\n    try\r\n    {\r\n        const resp = await getResourcesCategoryManageDataList({})\r\n        tableData.value = resp.data\r\n    } catch {}\r\n}\r\n\r\nonMounted( () =>\r\n{\r\n    getResourcesCategoryData()\r\n})\r\n\r\nconst clickEdit = (row:any) => //点击编辑按钮\r\n{\r\n    categoryForm.name = row.name\r\n    isDrawerOpen.value = true\r\n    categoryEditId.value = row.id\r\n}\r\n\r\nconst clickAdd = () => //点击新增按钮\r\n{\r\n    categoryForm.name = \"\"\r\n    isDrawerOpen.value = true\r\n    categoryEditId.value = 0\r\n}\r\n\r\nconst doAddOrEditCategory = async () =>\r\n{\r\n    try\r\n    {\r\n        const params =\r\n        {\r\n            id: categoryEditId.value,\r\n            name: categoryForm.name,\r\n        }\r\n        const resp = await addOrUpdateResourcesCategory(params)\r\n        if(resp.data.code == 200)\r\n        {\r\n            ElMessage({\r\n                message: t(\"static.submitSuccess\"),\r\n                type: 'success',\r\n            })\r\n        }\r\n        else if(resp.data.code == 400)\r\n        {\r\n            ElMessage({\r\n                message: t(\"static.nameHasBeenUsed\"),\r\n                type: 'warning',\r\n            })\r\n        }\r\n        else\r\n        {\r\n            ElMessage({\r\n                message: t(\"static.paramsError\"),\r\n                type: 'error',\r\n            })\r\n        }\r\n        getResourcesCategoryData()\r\n        isDrawerOpen.value = false\r\n    } catch {}\r\n}\r\n\r\nconst clickAddOrEditCategory = async (formEl: FormInstance | undefined) => //点击添加或修改 resourcesCategory 提交\r\n{\r\n    if (!formEl) return\r\n    await formEl.validate((valid, fields) => {\r\n        if (valid) {\r\n            doAddOrEditCategory()\r\n        } else {\r\n            console.log('error submit!', fields)\r\n        }\r\n    })\r\n}\r\n\r\nconst onWindowSizeChanged = () => //窗口大小变动\r\n{\r\n    tableHeight.value = (window.innerHeight - 240) + \"px\"\r\n}\r\n\r\nwindow.addEventListener('resize',onWindowSizeChanged) //监听窗口变动\r\n</script>\r\n\r\n<style>\r\n@import '@/css/common.css';\r\n\r\n.resources-category-manage-add-button\r\n{\r\n    width: 100%;\r\n    margin-top: 20px;\r\n}\r\n\r\n.resources-category-manage-drawer-title\r\n{\r\n    font-weight: bold;\r\n}\r\n\r\n.resources-category-manage-submit-button-icon\r\n{\r\n    margin-right: 10px;\r\n}\r\n</style>","import script from \"./ResourcesCategoryManage.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./ResourcesCategoryManage.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./ResourcesCategoryManage.vue?vue&type=style&index=0&id=3207566c&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["getResourcesCategoryManageDataList","params","get","getResourcesCategoryList","addOrUpdateResourcesCategory","post","getResourcesManageList","editResourcesMessage","checkResourcesName","uploadResources","file","postForm","getResourcesList","downloadResources","downloadFile","_hoisted_1","class","_defineComponent","__name","setup","__props","t","i18n","global","tableData","ref","tableHeight","window","innerHeight","isDrawerOpen","categoryForm","reactive","name","categoryFormRef","categoryFormRules","required","message","trigger","categoryEditId","getResourcesCategoryData","async","resp","value","data","onMounted","clickEdit","row","id","clickAdd","doAddOrEditCategory","code","ElMessage","type","clickAddOrEditCategory","formEl","validate","valid","fields","console","log","onWindowSizeChanged","addEventListener","_ctx","_cache","_component_el_table_column","_resolveComponent","_component_el_button","_component_el_table","_component_Plus","_component_el_icon","_component_el_card","_component_el_input","_component_el_form_item","_component_CircleCheckFilled","_component_el_form","_component_el_drawer","_openBlock","_createElementBlock","_Fragment","_createVNode","default","_withCtx","height","prop","header","_createTextVNode","_","_toDisplayString","$t","fixed","label","width","scope","link","onClick","$event","plain","_createElementVNode","modelValue","ref_key","model","rules","maxlength","clearable","size","__exports__"],"sourceRoot":""}