"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[497],{2458:function(e,t,l){l.d(t,{Iy:function(){return i},U6:function(){return s},Xp:function(){return c},d9:function(){return n},gp:function(){return u},w3:function(){return o},y3:function(){return r}});var a=l(9470);function n(e){return(0,a.Jt)("/notesManage/getNotesManageList",e)}function o(e){return(0,a.bE)("/notesManage/updateNote",e)}function s(e){return(0,a.Jt)("/notes/getNotesListByUser",e)}function u(e){return(0,a.bE)("/notes/addNote",e)}function i(e){return(0,a.bE)("/notes/deleteNote",e)}function r(e){return(0,a.bE)("/notesManage/deleteNoteData",e)}function c(e){return(0,a.bE)("/notes/editNote",e)}},3497:function(e,t,l){l.r(t),l.d(t,{default:function(){return _}});var a=l(6768),n=l(4232),o=l(144),s=l(9055),u=l(2458),i=l(1219),r=l(3851),c=l(8374);const d={class:"common-body-set-width"},m={class:"notes-search-div"},k={class:"notes-card-title"},f={class:"notes-card-buttons-div"},p={class:"notes-card-text-span"},b={class:"notes-pagination-div"},g={class:"notes-manage-drawer-title"};var v=(0,a.pM)({__name:"NotesIndex",setup(e){const{t:t}=c.A.global,l=(0,o.KR)(""),v=(0,o.KR)(window.innerHeight-230+"px"),F=(0,o.KR)(!1),_=(0,o.KR)(""),y=(0,o.KR)(!1),h=(0,o.KR)(null),w=(0,o.KR)(t("static.deleteConfirmTitle")),x=(0,o.KR)(1),C=(0,o.KR)(0),V=(0,o.KR)([]),R=(0,o.Kh)({title:"",text:""}),K=(0,o.KR)(),U=(0,o.Kh)({title:[{required:!0,message:t("rules.title"),trigger:"blur"}],text:[{required:!0,message:t("rules.content"),trigger:"blur"}]}),E=(0,o.KR)(""),L=async()=>{try{const e={searchInput:l.value,page:x.value},t=await(0,u.U6)(e);C.value=t.data.total,V.value=t.data.notesList}catch{}};(0,a.sV)((()=>{L()}));const N=()=>{L()},$=()=>{L()},z=()=>{_.value=(0,s.pp)(),R.title="",R.text="",F.value=!0,h.value?.scrollTo({top:0,behavior:"smooth"})},W=()=>{F.value=!1,R.title="",R.text=""},D=e=>{F.value=!1,R.title=e.title,R.text=e.text,y.value=!0,E.value=e.uuid},X=async()=>{try{const e={title:R.title,text:R.text},l=await(0,u.gp)(e);200==l.data.code?(0,i.nk)({message:t("static.saveSuccess"),type:"success"}):400==l.data.code?(0,i.nk)({message:t("static.saveFailed"),type:"warning"}):(0,i.nk)({message:t("static.paramsError"),type:"error"}),F.value=!1,R.title="",R.text="",L()}catch{}},B=async e=>{e&&await e.validate(((e,t)=>{e?X():console.log("error submit!",t)}))},I=async()=>{try{const e={uuid:E.value,title:R.title,text:R.text},l=await(0,u.Xp)(e);200==l.data.code?(0,i.nk)({message:t("static.submitSuccess"),type:"success"}):400==l.data.code?(0,i.nk)({message:t("static.nameHasBeenUsed"),type:"warning"}):401==l.data.code?(0,i.nk)({message:t("static.editFailedBecauseDifferentUser"),type:"warning"}):(0,i.nk)({message:t("static.paramsError"),type:"error"}),y.value=!1,R.title="",R.text="",L()}catch{}},M=async e=>{e&&await e.validate(((e,t)=>{e?I():console.log("error submit!",t)}))},S=()=>{w.value=t("static.deleteConfirmTitle")},T=async e=>{try{const l={uuid:e.uuid},n=await(0,u.Iy)(l);200==n.data.code?(0,i.nk)({message:t("static.deleteSuccess"),type:"success"}):400==n.data.code?(0,i.nk)({message:t("static.deleteFailed"),type:"warning"}):401==n.data.code?(0,r.df)({title:t("common.noties"),message:(0,a.h)("i",{style:"color: #F56C6C"},t("static.deleteFailedBecauseDifferentUser")),offset:50}):(0,i.nk)({message:t("static.paramsError"),type:"error"}),L()}catch{}},H=()=>{q()},q=()=>{v.value=window.innerHeight-230+"px"};return H(),window.addEventListener("resize",H),(e,t)=>{const u=(0,a.g2)("search"),i=(0,a.g2)("el-icon"),r=(0,a.g2)("el-button"),c=(0,a.g2)("el-input"),E=(0,a.g2)("el-col"),L=(0,a.g2)("Plus"),X=(0,a.g2)("el-row"),I=(0,a.g2)("el-form-item"),H=(0,a.g2)("el-divider"),q=(0,a.g2)("Check"),J=(0,a.g2)("Close"),P=(0,a.g2)("el-form"),A=(0,a.g2)("el-card"),Q=(0,a.g2)("el-timeline-item"),j=(0,a.g2)("Edit"),G=(0,a.g2)("Delete"),O=(0,a.g2)("el-popconfirm"),Y=(0,a.g2)("CopyDocument"),Z=(0,a.g2)("el-timeline"),ee=(0,a.g2)("el-scrollbar"),te=(0,a.g2)("el-pagination"),le=(0,a.g2)("el-drawer");return(0,a.uX)(),(0,a.CE)("div",d,[(0,a.Lk)("div",m,[(0,a.bF)(X,null,{default:(0,a.k6)((()=>[(0,a.bF)(E,{span:20},{default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),placeholder:"search",clearable:""},{append:(0,a.k6)((()=>[(0,a.bF)(r,{onClick:N},{default:(0,a.k6)((()=>[(0,a.bF)(i,null,{default:(0,a.k6)((()=>[(0,a.bF)(u)])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,a.bF)(E,{span:4},{default:(0,a.k6)((()=>[(0,a.bF)(r,{onClick:z,class:"notes-add-button",type:"danger"},{default:(0,a.k6)((()=>[(0,a.bF)(i,{size:"15"},{default:(0,a.k6)((()=>[(0,a.bF)(L)])),_:1})])),_:1})])),_:1})])),_:1})]),(0,a.bF)(A,{class:"notes-timeline"},{default:(0,a.k6)((()=>[(0,a.bF)(ee,{height:v.value,ref_key:"notesScrollBarRef",ref:h},{default:(0,a.k6)((()=>[(0,a.bF)(Z,null,{default:(0,a.k6)((()=>[F.value?((0,a.uX)(),(0,a.Wv)(Q,{key:0,center:"",placement:"top",timestamp:_.value},{default:(0,a.k6)((()=>[(0,a.bF)(A,null,{default:(0,a.k6)((()=>[(0,a.bF)(P,{ref_key:"notesFormRef",ref:K,model:R,rules:U,"label-width":"auto"},{default:(0,a.k6)((()=>[(0,a.bF)(I,{prop:"title"},{label:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t("common.title")),1)])),default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:R.title,"onUpdate:modelValue":t[1]||(t[1]=e=>R.title=e),clearable:"","show-word-limit":"",maxlength:"50"},null,8,["modelValue"])])),_:1}),(0,a.bF)(H),(0,a.bF)(I,{prop:"text"},{label:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t("common.content")),1)])),default:(0,a.k6)((()=>[(0,a.bF)(c,{modelValue:R.text,"onUpdate:modelValue":t[2]||(t[2]=e=>R.text=e),clearable:"","show-word-limit":"",maxlength:"1000",type:"textarea",autosize:{minRows:3}},null,8,["modelValue"])])),_:1}),(0,a.bF)(I,null,{default:(0,a.k6)((()=>[(0,a.bF)(r,{type:"success",plain:"",onClick:t[3]||(t[3]=e=>B(K.value))},{default:(0,a.k6)((()=>[(0,a.bF)(i,null,{default:(0,a.k6)((()=>[(0,a.bF)(q)])),_:1})])),_:1}),(0,a.bF)(r,{type:"info",plain:"",onClick:t[4]||(t[4]=e=>W())},{default:(0,a.k6)((()=>[(0,a.bF)(i,null,{default:(0,a.k6)((()=>[(0,a.bF)(J)])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1},8,["timestamp"])):(0,a.Q3)("",!0),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(V.value,((l,u)=>((0,a.uX)(),(0,a.Wv)(Q,{key:u,center:"",placement:"top",timestamp:l.createTime},{default:(0,a.k6)((()=>[(0,a.bF)(A,null,{default:(0,a.k6)((()=>[(0,a.Lk)("span",k,(0,n.v_)(l.title),1),(0,a.Lk)("div",f,[(0,a.bF)(r,{class:"notes-card-button",text:"",circle:"",onClick:e=>D(l)},{default:(0,a.k6)((()=>[(0,a.bF)(i,null,{default:(0,a.k6)((()=>[(0,a.bF)(j)])),_:1})])),_:2},1032,["onClick"]),(0,a.bF)(O,{title:w.value,"icon-color":"#F56C6C",onConfirm:e=>T(l)},{reference:(0,a.k6)((()=>[(0,a.bF)(r,{class:"notes-card-button",text:"",circle:"",onClick:t[5]||(t[5]=e=>S())},{default:(0,a.k6)((()=>[(0,a.bF)(i,null,{default:(0,a.k6)((()=>[(0,a.bF)(G)])),_:1})])),_:1})])),actions:(0,a.k6)((({confirm:t,cancel:l})=>[(0,a.bF)(r,{size:"small",onClick:l},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t("common.no")),1)])),_:2},1032,["onClick"]),(0,a.bF)(r,{type:"danger",size:"small",onClick:t},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t("common.yes")),1)])),_:2},1032,["onClick"])])),_:2},1032,["title","onConfirm"]),(0,a.bF)(r,{class:"notes-card-button",text:"",circle:"",onClick:e=>(0,o.R1)(s.Dk)(l.text)},{default:(0,a.k6)((()=>[(0,a.bF)(i,null,{default:(0,a.k6)((()=>[(0,a.bF)(Y)])),_:1})])),_:2},1032,["onClick"])]),(0,a.bF)(H),(0,a.Lk)("span",p,(0,n.v_)(l.text),1)])),_:2},1024)])),_:2},1032,["timestamp"])))),128))])),_:1})])),_:1},8,["height"]),(0,a.Lk)("div",b,[(0,a.bF)(te,{layout:"prev, pager, next","current-page":x.value,"onUpdate:currentPage":t[6]||(t[6]=e=>x.value=e),onCurrentChange:t[7]||(t[7]=e=>$()),"page-size":20,total:C.value,"pager-count":5,background:""},null,8,["current-page","total"])])])),_:1}),(0,a.bF)(le,{modelValue:y.value,"onUpdate:modelValue":t[11]||(t[11]=e=>y.value=e)},{header:(0,a.k6)((()=>[(0,a.Lk)("span",g,(0,n.v_)(e.$t("static.editNote")),1)])),default:(0,a.k6)((()=>[(0,a.bF)(P,{ref_key:"notesFormRef",ref:K,model:R,rules:U},{default:(0,a.k6)((()=>[(0,a.bF)(I,{prop:"title"},{default:(0,a.k6)((()=>[(0,a.Lk)("h1",null,(0,n.v_)(e.$t("common.title")),1),(0,a.bF)(c,{modelValue:R.title,"onUpdate:modelValue":t[8]||(t[8]=e=>R.title=e),maxlength:"50","show-word-limit":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(I,{prop:"text"},{default:(0,a.k6)((()=>[(0,a.Lk)("h1",null,(0,n.v_)(e.$t("common.content")),1),(0,a.bF)(c,{modelValue:R.text,"onUpdate:modelValue":t[9]||(t[9]=e=>R.text=e),rows:2,type:"textarea",autosize:{minRows:3},maxlength:"1000","show-word-limit":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,a.bF)(I,null,{default:(0,a.k6)((()=>[(0,a.bF)(r,{onClick:t[10]||(t[10]=e=>M(K.value)),type:"success"},{default:(0,a.k6)((()=>[(0,a.eW)((0,n.v_)(e.$t("common.submit")),1)])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});const F=v;var _=F}}]);
//# sourceMappingURL=497.d0941da9.js.map