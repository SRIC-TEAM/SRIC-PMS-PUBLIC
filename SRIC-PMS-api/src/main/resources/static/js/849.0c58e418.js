"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[849],{1506:function(e,l,a){a.d(l,{y:function(){return n}});const n=[{value:"1",label:"#c93f38"},{value:"2",label:"#e56e24"},{value:"3",label:"#eec400"},{value:"4",label:"#a59344"},{value:"5",label:"#76b583"},{value:"6",label:"#008a60"},{value:"7",label:"#65a7dd"},{value:"8",label:"#00035b"},{value:"9",label:"#7249d6"},{value:"10",label:"#9c52f2"}]},8849:function(e,l,a){a.r(l),a.d(l,{default:function(){return b}});var n=a(6768),t=a(4232),i=a(144),u=a(7002),o=a(9055),r=a(1506),s=a(1219),d=a(8374);const m={class:"permission-main-menu-manage-pagination-div"},c={class:"permission-main-menu-manage-drawer-title"};var p=(0,n.pM)({__name:"PermissionMainMenuManage",setup(e){const{t:l}=d.A.global,a=(0,i.KR)([]),p=(0,i.KR)(1),v=(0,i.KR)(0),b=(0,i.KR)(window.innerHeight-290+"px"),g=(0,i.KR)(!1),k=(0,i.Kh)({name:"",level:"",description:""}),_=(0,i.KR)(),f=(0,i.Kh)({name:[{required:!0,message:l("rules.name"),trigger:"blur"}],level:[{required:!0,message:l("rules.permissionLevel"),trigger:"blur"}],description:[{required:!0,message:l("rules.description"),trigger:"blur"}]}),h=(0,i.KR)(""),F=async()=>{try{const e={page:p.value},l=await(0,u.Cb)(e);v.value=l.data.total,a.value=l.data.permissionMainMenuList}catch{}};(0,n.sV)((()=>{F()}));const w=()=>{F()},y=e=>{k.name=e.name,k.level=e.level,k.description=e.description,g.value=!0,h.value=e.uuid},L=()=>{k.name="",k.level="",k.description="",g.value=!0,h.value=""},C=async()=>{try{const e={uuid:h.value,name:k.name,level:k.level,description:k.description},a=await(0,u.dW)(e);200==a.data.code?(0,s.nk)({message:l("static.submitSuccess"),type:"success"}):400==a.data.code?(0,s.nk)({message:l("static.nameHasBeenUsed"),type:"warning"}):(0,s.nk)({message:l("static.paramsError"),type:"error"}),F(),g.value=!1}catch{}},V=async e=>{e&&await e.validate(((e,l)=>{e?C():console.log("error submit!",l)}))},$=()=>{b.value=window.innerHeight-290+"px"};return window.addEventListener("resize",$),(e,l)=>{const u=(0,n.g2)("el-table-column"),s=(0,n.g2)("el-button"),d=(0,n.g2)("el-table"),h=(0,n.g2)("el-pagination"),F=(0,n.g2)("Plus"),C=(0,n.g2)("el-icon"),$=(0,n.g2)("el-card"),K=(0,n.g2)("el-input"),M=(0,n.g2)("el-form-item"),R=(0,n.g2)("el-tag"),W=(0,n.g2)("el-option"),x=(0,n.g2)("el-select"),U=(0,n.g2)("CircleCheckFilled"),E=(0,n.g2)("el-form"),q=(0,n.g2)("el-drawer");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)($,null,{default:(0,n.k6)((()=>[(0,n.bF)(d,{data:a.value,height:b.value},{default:(0,n.k6)((()=>[(0,n.bF)(u,{prop:"uuid",width:"300"},{header:(0,n.k6)((()=>[(0,n.eW)(" MENU ID ")])),_:1}),(0,n.bF)(u,{prop:"name",width:"180"},{header:(0,n.k6)((()=>[(0,n.eW)((0,t.v_)(e.$t("common.name")),1)])),_:1}),(0,n.bF)(u,{prop:"level",width:"80"},{header:(0,n.k6)((()=>[(0,n.eW)((0,t.v_)(e.$t("static.permissionLevel")),1)])),default:(0,n.k6)((e=>[(0,n.Lk)("span",{style:(0,t.Tr)((0,i.R1)(o.qY)(e.row.level))},(0,t.v_)(e.row.level),5)])),_:1}),(0,n.bF)(u,{prop:"description"},{header:(0,n.k6)((()=>[(0,n.eW)((0,t.v_)(e.$t("common.description")),1)])),_:1}),(0,n.bF)(u,{fixed:"right",label:"Operations",width:"120"},{header:(0,n.k6)((()=>[(0,n.eW)((0,t.v_)(e.$t("common.operations")),1)])),default:(0,n.k6)((l=>[(0,n.bF)(s,{link:"",type:"primary",onClick:e=>y(l.row)},{default:(0,n.k6)((()=>[(0,n.eW)((0,t.v_)(e.$t("common.edit")),1)])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","height"]),(0,n.Lk)("div",m,[(0,n.bF)(h,{layout:"prev, pager, next","current-page":p.value,"onUpdate:currentPage":l[0]||(l[0]=e=>p.value=e),onCurrentChange:l[1]||(l[1]=e=>w()),"page-size":20,total:v.value,"pager-count":5,background:""},null,8,["current-page","total"])]),(0,n.bF)(s,{onClick:l[2]||(l[2]=e=>L()),type:"warning",class:"permission-main-menu-manage-add-button",plain:""},{default:(0,n.k6)((()=>[(0,n.bF)(C,null,{default:(0,n.k6)((()=>[(0,n.bF)(F)])),_:1}),(0,n.Lk)("span",null,(0,t.v_)(e.$t("common.add")),1)])),_:1})])),_:1}),(0,n.bF)(q,{modelValue:g.value,"onUpdate:modelValue":l[7]||(l[7]=e=>g.value=e)},{header:(0,n.k6)((()=>[(0,n.Lk)("span",c,(0,t.v_)(e.$t("static.editAndAddMainMenu")),1)])),default:(0,n.k6)((()=>[(0,n.bF)(E,{ref_key:"permissionMainMenuFormRef",ref:_,model:k,rules:f},{default:(0,n.k6)((()=>[(0,n.bF)(M,{prop:"name"},{default:(0,n.k6)((()=>[(0,n.Lk)("h1",null,(0,t.v_)(e.$t("common.menu")),1),(0,n.bF)(K,{modelValue:k.name,"onUpdate:modelValue":l[3]||(l[3]=e=>k.name=e),maxlength:"20","show-word-limit":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,n.bF)(M,{prop:"level"},{default:(0,n.k6)((()=>[(0,n.Lk)("h1",null,(0,t.v_)(e.$t("static.permissionLevel")),1),(0,n.bF)(x,{modelValue:k.level,"onUpdate:modelValue":l[4]||(l[4]=e=>k.level=e)},{label:(0,n.k6)((({value:l})=>[(0,n.Lk)("span",null,(0,t.v_)(e.$t("static.permissionLevel"))+" : "+(0,t.v_)(l),1)])),default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)((0,i.R1)(r.y),((l,a)=>((0,n.uX)(),(0,n.Wv)(W,{key:a,label:l.label,value:l.value},{default:(0,n.k6)((()=>[(0,n.bF)(R,{color:l.label,class:"permission-main-menu-select-color-tag",size:"small"},null,8,["color"]),(0,n.Lk)("span",{style:(0,t.Tr)({color:l.label})},(0,t.v_)(e.$t("static.permissionLevel"))+" : "+(0,t.v_)(l.value),5)])),_:2},1032,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,n.bF)(M,{prop:"description"},{default:(0,n.k6)((()=>[(0,n.Lk)("h1",null,(0,t.v_)(e.$t("common.description")),1),(0,n.bF)(K,{modelValue:k.description,"onUpdate:modelValue":l[5]||(l[5]=e=>k.description=e),rows:2,type:"textarea",maxlength:"25","show-word-limit":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,n.bF)(M,null,{default:(0,n.k6)((()=>[(0,n.bF)(s,{onClick:l[6]||(l[6]=e=>V(_.value)),type:"success"},{default:(0,n.k6)((()=>[(0,n.bF)(C,{class:"permission-main-menu-submit-button-icon",size:"15"},{default:(0,n.k6)((()=>[(0,n.bF)(U)])),_:1}),(0,n.eW)(" "+(0,t.v_)(e.$t("common.submit")),1)])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])],64)}}});const v=p;var b=v}}]);
//# sourceMappingURL=849.0c58e418.js.map