{"version":3,"file":"js/33.e8b656aa.js","mappings":"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","sources":["webpack://front/./src/tools/staticResources.ts","webpack://front/./src/axios/api/permissionRequest.ts","webpack://front/./src/views/manage/PermissionRequestManage.vue?ba90","webpack://front/./src/views/manage/PermissionRequestManage.vue","webpack://front/./src/views/manage/PermissionRequestManage.vue?7ecb"],"sourcesContent":["export const levels = \r\n[\r\n    {\r\n        value: '1',\r\n        label: '#c93f38',\r\n    },\r\n    {\r\n        value: '2',\r\n        label: '#e56e24',\r\n    },\r\n    {\r\n        value: '3',\r\n        label: '#eec400',\r\n    },\r\n    {\r\n        value: '4',\r\n        label: '#a59344',\r\n    },\r\n    {\r\n        value: '5',\r\n        label: '#76b583',\r\n    },\r\n    {\r\n        value: '6',\r\n        label: '#008a60',\r\n    },\r\n    {\r\n        value: '7',\r\n        label: '#65a7dd',\r\n    },\r\n    {\r\n        value: '8',\r\n        label: '#00035b',\r\n    },\r\n    {\r\n        value: '9',\r\n        label: '#7249d6',\r\n    },\r\n    {\r\n        value: '10',\r\n        label: '#9c52f2',\r\n    },\r\n]","import { get,post } from '@/axios/axios'\r\n\r\nexport function getPermissionRequestList(params:any)\r\n{\r\n    return get('/permissionRequest/getPermissionRequestList',params)\r\n}\r\n\r\nexport function addOrUpdatePermissionRequest(params:any)\r\n{\r\n    return post('/permissionRequest/addOrUpdatePermissionRequest',params)\r\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, unref as _unref, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"permission-request-manage-pagination-div\" }\nconst _hoisted_2 = { class: \"permission-request-manage-drawer-title\" }\n\nimport { ref,onMounted,reactive } from 'vue'\r\nimport { getPermissionRequestList,addOrUpdatePermissionRequest } from '@/axios/api/permissionRequest';\r\nimport { getStatusColor } from '@/tools/tool'\r\nimport { levels } from '@/tools/staticResources' //引入权限静态数据\r\nimport type { FormInstance } from 'element-plus'\r\nimport { ElMessage } from 'element-plus' //element消息\r\nimport i18n from '@/language';\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'PermissionRequestManage',\n  setup(__props) {\n\r\nconst { t } = i18n.global\r\n\r\nconst tableData = ref([]) //主页面表表格数据\r\nconst page = ref(1) //页数\r\nconst pageTotal = ref(0) //总条数\r\nconst tableHeight = ref((window.innerHeight - 290) + \"px\") //表格高度\r\nconst isDrawerOpen = ref(false) //抽屉是否打开\r\nconst permissionRequestForm = reactive //接口数据输入表单\r\n({\r\n    requestMapping: \"\",\r\n    level: \"\",\r\n    description: \"\",\r\n})\r\nconst permissionRequestFormRef = ref<FormInstance>() //添加 permissionRequest 表单的 ref\r\nconst permissionRequestFormRules = reactive //添加 permissionRequest 表单的 rule\r\n({\r\n    requestMapping:\r\n    [\r\n        { required: true, message: t(\"rules.interface\"), trigger: 'blur' },\r\n    ],\r\n    level:\r\n    [\r\n        { required: true, message: t(\"rules.permissionLevel\"), trigger: 'blur' },\r\n    ],\r\n    description:\r\n    [\r\n        { required: true, message: t(\"rules.description\"), trigger: 'blur' },\r\n    ],\r\n})\r\nconst permissionRequestEditUuid = ref(\"\") //修改的类别 uuid\r\n\r\nconst getPermissionRequestData = async () => //获取接口列表\r\n{\r\n    try\r\n    {\r\n        const params =\r\n        {\r\n            page: page.value,\r\n        }\r\n        const resp = await getPermissionRequestList(params)\r\n        pageTotal.value = resp.data.total\r\n        tableData.value = resp.data.permissionRequestList\r\n    } catch {}\r\n}\r\n\r\nonMounted( () =>\r\n{\r\n    getPermissionRequestData()\r\n})\r\n\r\nconst pageChange = () => //翻页\r\n{\r\n    getPermissionRequestData()\r\n}\r\n\r\nconst clickEdit = (row:any) => //点击编辑按钮\r\n{\r\n    permissionRequestForm.requestMapping = row.requestMapping\r\n    permissionRequestForm.level = row.level\r\n    permissionRequestForm.description = row.description\r\n    isDrawerOpen.value = true\r\n    permissionRequestEditUuid.value = row.uuid\r\n}\r\n\r\nconst clickAdd = () => //点击新增按钮\r\n{\r\n    permissionRequestForm.requestMapping = \"\"\r\n    permissionRequestForm.level = \"\"\r\n    permissionRequestForm.description = \"\"\r\n    isDrawerOpen.value = true\r\n    permissionRequestEditUuid.value = \"\"\r\n}\r\n\r\nconst doAddOrEditPermissionRequest = async () =>\r\n{\r\n    try\r\n    {\r\n        const params =\r\n        {\r\n            uuid: permissionRequestEditUuid.value,\r\n            requestMapping: permissionRequestForm.requestMapping,\r\n            level: permissionRequestForm.level,\r\n            description: permissionRequestForm.description,\r\n        }\r\n        const resp = await addOrUpdatePermissionRequest(params)\r\n        if(resp.data.code == 200)\r\n        {\r\n            ElMessage({\r\n                message: t(\"static.submitSuccess\"),\r\n                type: 'success',\r\n            })\r\n        }\r\n        else if(resp.data.code == 400)\r\n        {\r\n            ElMessage({\r\n                message: t(\"static.nameHasBeenUsed\"),\r\n                type: 'warning',\r\n            })\r\n        }\r\n        else\r\n        {\r\n            ElMessage({\r\n                message: t(\"static.paramsError\"),\r\n                type: 'error',\r\n            })\r\n        }\r\n        getPermissionRequestData()\r\n        isDrawerOpen.value = false\r\n    } catch {}\r\n}\r\n\r\nconst clickAddOrEditPermissionRequest = async (formEl: FormInstance | undefined) => //点击添加或修改 permissionRequest 提交\r\n{\r\n    if (!formEl) return\r\n    await formEl.validate((valid, fields) => {\r\n        if (valid) {\r\n            doAddOrEditPermissionRequest()\r\n        } else {\r\n            console.log('error submit!', fields)\r\n        }\r\n    })\r\n}\r\n\r\nconst onWindowSizeChanged = () => //窗口大小变动\r\n{\r\n    tableHeight.value = (window.innerHeight - 290) + \"px\"\r\n}\r\n\r\nwindow.addEventListener('resize',onWindowSizeChanged) //监听窗口变动\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_table_column = _resolveComponent(\"el-table-column\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_table = _resolveComponent(\"el-table\")!\n  const _component_el_pagination = _resolveComponent(\"el-pagination\")!\n  const _component_Plus = _resolveComponent(\"Plus\")!\n  const _component_el_icon = _resolveComponent(\"el-icon\")!\n  const _component_el_card = _resolveComponent(\"el-card\")!\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_tag = _resolveComponent(\"el-tag\")!\n  const _component_el_option = _resolveComponent(\"el-option\")!\n  const _component_el_select = _resolveComponent(\"el-select\")!\n  const _component_CircleCheckFilled = _resolveComponent(\"CircleCheckFilled\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n  const _component_el_drawer = _resolveComponent(\"el-drawer\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_el_card, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_el_table, {\n          data: tableData.value,\n          height: tableHeight.value\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_table_column, {\n              prop: \"uuid\",\n              width: \"300\"\n            }, {\n              header: _withCtx(() => [\n                _createTextVNode(\" INTERFACE ID \")\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_table_column, {\n              prop: \"requestMapping\",\n              width: \"180\"\n            }, {\n              header: _withCtx(() => [\n                _createTextVNode(_toDisplayString(_ctx.$t(\"common.interface\")), 1)\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_table_column, {\n              prop: \"level\",\n              width: \"80\"\n            }, {\n              header: _withCtx(() => [\n                _createTextVNode(_toDisplayString(_ctx.$t(\"static.permissionLevel\")), 1)\n              ]),\n              default: _withCtx((scope) => [\n                _createElementVNode(\"span\", {\n                  style: _normalizeStyle(_unref(getStatusColor)(scope.row.level))\n                }, _toDisplayString(scope.row.level), 5)\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_table_column, { prop: \"description\" }, {\n              header: _withCtx(() => [\n                _createTextVNode(_toDisplayString(_ctx.$t(\"common.description\")), 1)\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_table_column, {\n              fixed: \"right\",\n              label: \"Operations\",\n              width: \"120\"\n            }, {\n              header: _withCtx(() => [\n                _createTextVNode(_toDisplayString(_ctx.$t(\"common.operations\")), 1)\n              ]),\n              default: _withCtx((scope) => [\n                _createVNode(_component_el_button, {\n                  link: \"\",\n                  type: \"primary\",\n                  onClick: ($event: any) => (clickEdit(scope.row))\n                }, {\n                  default: _withCtx(() => [\n                    _createTextVNode(_toDisplayString(_ctx.$t(\"common.edit\")), 1)\n                  ]),\n                  _: 2\n                }, 1032, [\"onClick\"])\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }, 8, [\"data\", \"height\"]),\n        _createElementVNode(\"div\", _hoisted_1, [\n          _createVNode(_component_el_pagination, {\n            layout: \"prev, pager, next\",\n            \"current-page\": page.value,\n            \"onUpdate:currentPage\": _cache[0] || (_cache[0] = ($event: any) => ((page).value = $event)),\n            onCurrentChange: _cache[1] || (_cache[1] = ($event: any) => (pageChange())),\n            \"page-size\": 20,\n            total: pageTotal.value,\n            \"pager-count\": 5,\n            background: \"\"\n          }, null, 8, [\"current-page\", \"total\"])\n        ]),\n        _createVNode(_component_el_button, {\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (clickAdd())),\n          type: \"warning\",\n          class: \"permission-request-manage-add-button\",\n          plain: \"\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_icon, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_Plus)\n              ]),\n              _: 1\n            }),\n            _createElementVNode(\"span\", null, _toDisplayString(_ctx.$t(\"common.add\")), 1)\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_el_drawer, {\n      modelValue: isDrawerOpen.value,\n      \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((isDrawerOpen).value = $event))\n    }, {\n      header: _withCtx(() => [\n        _createElementVNode(\"span\", _hoisted_2, _toDisplayString(_ctx.$t(\"static.editAndAddInterface\")), 1)\n      ]),\n      default: _withCtx(() => [\n        _createVNode(_component_el_form, {\n          ref_key: \"permissionRequestFormRef\",\n          ref: permissionRequestFormRef,\n          model: permissionRequestForm,\n          rules: permissionRequestFormRules\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_el_form_item, { prop: \"requestMapping\" }, {\n              default: _withCtx(() => [\n                _createElementVNode(\"h1\", null, _toDisplayString(_ctx.$t(\"common.interface\")), 1),\n                _createVNode(_component_el_input, {\n                  modelValue: permissionRequestForm.requestMapping,\n                  \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((permissionRequestForm.requestMapping) = $event)),\n                  maxlength: \"30\",\n                  \"show-word-limit\": \"\",\n                  clearable: \"\"\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, { prop: \"level\" }, {\n              default: _withCtx(() => [\n                _createElementVNode(\"h1\", null, _toDisplayString(_ctx.$t(\"static.permissionLevel\")), 1),\n                _createVNode(_component_el_select, {\n                  modelValue: permissionRequestForm.level,\n                  \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((permissionRequestForm.level) = $event))\n                }, {\n                  label: _withCtx(({ value }) => [\n                    _createElementVNode(\"span\", null, _toDisplayString(_ctx.$t(\"static.permissionLevel\")) + \" : \" + _toDisplayString(value), 1)\n                  ]),\n                  default: _withCtx(() => [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(levels), (item, i) => {\n                      return (_openBlock(), _createBlock(_component_el_option, {\n                        key: i,\n                        label: item.label,\n                        value: item.value\n                      }, {\n                        default: _withCtx(() => [\n                          _createVNode(_component_el_tag, {\n                            color: item.label,\n                            class: \"permission-request-select-color-tag\",\n                            size: \"small\"\n                          }, null, 8, [\"color\"]),\n                          _createElementVNode(\"span\", {\n                            style: _normalizeStyle({ color: item.label })\n                          }, _toDisplayString(_ctx.$t(\"static.permissionLevel\")) + \" : \" + _toDisplayString(item.value), 5)\n                        ]),\n                        _: 2\n                      }, 1032, [\"label\", \"value\"]))\n                    }), 128))\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, { prop: \"description\" }, {\n              default: _withCtx(() => [\n                _createElementVNode(\"h1\", null, _toDisplayString(_ctx.$t(\"common.description\")), 1),\n                _createVNode(_component_el_input, {\n                  modelValue: permissionRequestForm.description,\n                  \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((permissionRequestForm.description) = $event)),\n                  rows: 2,\n                  type: \"textarea\",\n                  maxlength: \"25\",\n                  \"show-word-limit\": \"\",\n                  clearable: \"\"\n                }, null, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_el_form_item, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_el_button, {\n                  onClick: _cache[6] || (_cache[6] = ($event: any) => (clickAddOrEditPermissionRequest(permissionRequestFormRef.value))),\n                  type: \"success\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_el_icon, {\n                      class: \"permission-request-submit-button-icon\",\n                      size: \"15\"\n                    }, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_CircleCheckFilled)\n                      ]),\n                      _: 1\n                    }),\n                    _createTextVNode(\" \" + _toDisplayString(_ctx.$t(\"common.submit\")), 1)\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }, 8, [\"model\", \"rules\"])\n      ]),\n      _: 1\n    }, 8, [\"modelValue\"])\n  ], 64))\n}\n}\n\n})","<template>\r\n    <el-card>\r\n        <el-table :data=\"tableData\" :height=\"tableHeight\">\r\n            <el-table-column prop=\"uuid\" width=\"300\">\r\n                <template #header>\r\n                    INTERFACE ID\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"requestMapping\" width=\"180\">\r\n                <template #header>\r\n                    {{ $t(\"common.interface\") }}\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"level\" width=\"80\">\r\n                <template #header>\r\n                    {{ $t(\"static.permissionLevel\") }}\r\n                </template>\r\n                <template #default=\"scope\">\r\n                    <span :style=\"getStatusColor(scope.row.level)\">\r\n                    {{ scope.row.level }}\r\n                    </span>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"description\">\r\n                <template #header>\r\n                    {{ $t(\"common.description\") }}\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column fixed=\"right\" label=\"Operations\" width=\"120\">\r\n                <template #header>\r\n                    {{ $t(\"common.operations\") }}\r\n                </template>\r\n                <template #default=\"scope\">\r\n                    <el-button link type=\"primary\" @click=\"clickEdit(scope.row)\">{{ $t(\"common.edit\") }}</el-button>\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <div class=\"permission-request-manage-pagination-div\">\r\n            <el-pagination layout=\"prev, pager, next\" v-model:current-page=\"page\" @current-change=\"pageChange()\" :page-size=\"20\" :total=\"pageTotal\" :pager-count=\"5\" background />\r\n        </div>\r\n        <el-button @click=\"clickAdd()\" type=\"warning\" class=\"permission-request-manage-add-button\" plain>\r\n            <el-icon>\r\n                <Plus />\r\n            </el-icon>\r\n            <span>{{ $t(\"common.add\") }}</span>\r\n        </el-button>\r\n    </el-card>\r\n    <el-drawer v-model=\"isDrawerOpen\">\r\n        <template #header>\r\n            <span class=\"permission-request-manage-drawer-title\">{{ $t(\"static.editAndAddInterface\") }}</span>\r\n        </template>\r\n        <el-form ref=\"permissionRequestFormRef\" :model=\"permissionRequestForm\" :rules=\"permissionRequestFormRules\">\r\n            <el-form-item prop=\"requestMapping\">\r\n                <h1>{{ $t(\"common.interface\") }}</h1>\r\n                <el-input v-model=\"permissionRequestForm.requestMapping\" maxlength=\"30\" show-word-limit clearable></el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"level\">\r\n                <h1>{{ $t(\"static.permissionLevel\") }}</h1>\r\n                <el-select v-model=\"permissionRequestForm.level\">\r\n                    <el-option v-for=\"(item,i) in levels\" :key=\"i\" :label=\"item.label\" :value=\"item.value\">\r\n                        <el-tag :color=\"item.label\" class=\"permission-request-select-color-tag\" size=\"small\" />\r\n                        <span :style=\"{ color: item.label }\">{{ $t(\"static.permissionLevel\") }} : {{ item.value }}</span>\r\n                    </el-option>\r\n                    <template #label=\"{ value }\">\r\n                        <span>{{ $t(\"static.permissionLevel\") }} : {{ value }}</span>\r\n                    </template>\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item prop=\"description\">\r\n                <h1>{{ $t(\"common.description\") }}</h1>\r\n                <el-input v-model=\"permissionRequestForm.description\" :rows=\"2\" type=\"textarea\" maxlength=\"25\" show-word-limit clearable></el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button @click=\"clickAddOrEditPermissionRequest(permissionRequestFormRef)\" type=\"success\">\r\n                    <el-icon class=\"permission-request-submit-button-icon\" size=\"15\">\r\n                        <CircleCheckFilled/>\r\n                    </el-icon>\r\n                    {{ $t(\"common.submit\") }}\r\n                </el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n    </el-drawer>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { ref,onMounted,reactive } from 'vue'\r\nimport { getPermissionRequestList,addOrUpdatePermissionRequest } from '@/axios/api/permissionRequest';\r\nimport { getStatusColor } from '@/tools/tool'\r\nimport { levels } from '@/tools/staticResources' //引入权限静态数据\r\nimport type { FormInstance } from 'element-plus'\r\nimport { ElMessage } from 'element-plus' //element消息\r\nimport i18n from '@/language';\r\nconst { t } = i18n.global\r\n\r\nconst tableData = ref([]) //主页面表表格数据\r\nconst page = ref(1) //页数\r\nconst pageTotal = ref(0) //总条数\r\nconst tableHeight = ref((window.innerHeight - 290) + \"px\") //表格高度\r\nconst isDrawerOpen = ref(false) //抽屉是否打开\r\nconst permissionRequestForm = reactive //接口数据输入表单\r\n({\r\n    requestMapping: \"\",\r\n    level: \"\",\r\n    description: \"\",\r\n})\r\nconst permissionRequestFormRef = ref<FormInstance>() //添加 permissionRequest 表单的 ref\r\nconst permissionRequestFormRules = reactive //添加 permissionRequest 表单的 rule\r\n({\r\n    requestMapping:\r\n    [\r\n        { required: true, message: t(\"rules.interface\"), trigger: 'blur' },\r\n    ],\r\n    level:\r\n    [\r\n        { required: true, message: t(\"rules.permissionLevel\"), trigger: 'blur' },\r\n    ],\r\n    description:\r\n    [\r\n        { required: true, message: t(\"rules.description\"), trigger: 'blur' },\r\n    ],\r\n})\r\nconst permissionRequestEditUuid = ref(\"\") //修改的类别 uuid\r\n\r\nconst getPermissionRequestData = async () => //获取接口列表\r\n{\r\n    try\r\n    {\r\n        const params =\r\n        {\r\n            page: page.value,\r\n        }\r\n        const resp = await getPermissionRequestList(params)\r\n        pageTotal.value = resp.data.total\r\n        tableData.value = resp.data.permissionRequestList\r\n    } catch {}\r\n}\r\n\r\nonMounted( () =>\r\n{\r\n    getPermissionRequestData()\r\n})\r\n\r\nconst pageChange = () => //翻页\r\n{\r\n    getPermissionRequestData()\r\n}\r\n\r\nconst clickEdit = (row:any) => //点击编辑按钮\r\n{\r\n    permissionRequestForm.requestMapping = row.requestMapping\r\n    permissionRequestForm.level = row.level\r\n    permissionRequestForm.description = row.description\r\n    isDrawerOpen.value = true\r\n    permissionRequestEditUuid.value = row.uuid\r\n}\r\n\r\nconst clickAdd = () => //点击新增按钮\r\n{\r\n    permissionRequestForm.requestMapping = \"\"\r\n    permissionRequestForm.level = \"\"\r\n    permissionRequestForm.description = \"\"\r\n    isDrawerOpen.value = true\r\n    permissionRequestEditUuid.value = \"\"\r\n}\r\n\r\nconst doAddOrEditPermissionRequest = async () =>\r\n{\r\n    try\r\n    {\r\n        const params =\r\n        {\r\n            uuid: permissionRequestEditUuid.value,\r\n            requestMapping: permissionRequestForm.requestMapping,\r\n            level: permissionRequestForm.level,\r\n            description: permissionRequestForm.description,\r\n        }\r\n        const resp = await addOrUpdatePermissionRequest(params)\r\n        if(resp.data.code == 200)\r\n        {\r\n            ElMessage({\r\n                message: t(\"static.submitSuccess\"),\r\n                type: 'success',\r\n            })\r\n        }\r\n        else if(resp.data.code == 400)\r\n        {\r\n            ElMessage({\r\n                message: t(\"static.nameHasBeenUsed\"),\r\n                type: 'warning',\r\n            })\r\n        }\r\n        else\r\n        {\r\n            ElMessage({\r\n                message: t(\"static.paramsError\"),\r\n                type: 'error',\r\n            })\r\n        }\r\n        getPermissionRequestData()\r\n        isDrawerOpen.value = false\r\n    } catch {}\r\n}\r\n\r\nconst clickAddOrEditPermissionRequest = async (formEl: FormInstance | undefined) => //点击添加或修改 permissionRequest 提交\r\n{\r\n    if (!formEl) return\r\n    await formEl.validate((valid, fields) => {\r\n        if (valid) {\r\n            doAddOrEditPermissionRequest()\r\n        } else {\r\n            console.log('error submit!', fields)\r\n        }\r\n    })\r\n}\r\n\r\nconst onWindowSizeChanged = () => //窗口大小变动\r\n{\r\n    tableHeight.value = (window.innerHeight - 290) + \"px\"\r\n}\r\n\r\nwindow.addEventListener('resize',onWindowSizeChanged) //监听窗口变动\r\n</script>\r\n\r\n<style>\r\n@import '@/css/common.css';\r\n\r\n.permission-request-manage-add-button\r\n{\r\n    width: 100%;\r\n    margin-top: 20px;\r\n}\r\n\r\n.permission-request-manage-pagination-div\r\n{\r\n    margin-top: 20px;\r\n}\r\n\r\n.permission-request-select-color-tag\r\n{\r\n    margin-right: 8px;\r\n    border: none;\r\n    aspect-ratio: 1;\r\n}\r\n\r\n.permission-request-manage-drawer-title\r\n{\r\n    font-weight: bold;\r\n}\r\n\r\n.permission-request-submit-button-icon\r\n{\r\n    margin-right: 10px;\r\n}\r\n</style>","import script from \"./PermissionRequestManage.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./PermissionRequestManage.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./PermissionRequestManage.vue?vue&type=style&index=0&id=da0cb914&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["levels","value","label","getPermissionRequestList","params","get","addOrUpdatePermissionRequest","post","_hoisted_1","class","_hoisted_2","_defineComponent","__name","setup","__props","t","i18n","global","tableData","ref","page","pageTotal","tableHeight","window","innerHeight","isDrawerOpen","permissionRequestForm","reactive","requestMapping","level","description","permissionRequestFormRef","permissionRequestFormRules","required","message","trigger","permissionRequestEditUuid","getPermissionRequestData","async","resp","data","total","permissionRequestList","onMounted","pageChange","clickEdit","row","uuid","clickAdd","doAddOrEditPermissionRequest","code","ElMessage","type","clickAddOrEditPermissionRequest","formEl","validate","valid","fields","console","log","onWindowSizeChanged","addEventListener","_ctx","_cache","_component_el_table_column","_resolveComponent","_component_el_button","_component_el_table","_component_el_pagination","_component_Plus","_component_el_icon","_component_el_card","_component_el_input","_component_el_form_item","_component_el_tag","_component_el_option","_component_el_select","_component_CircleCheckFilled","_component_el_form","_component_el_drawer","_openBlock","_createElementBlock","_Fragment","_createVNode","default","_withCtx","height","prop","width","header","_createTextVNode","_","_toDisplayString","$t","scope","_createElementVNode","style","_normalizeStyle","_unref","getStatusColor","fixed","link","onClick","$event","layout","onCurrentChange","background","plain","modelValue","ref_key","model","rules","maxlength","clearable","_renderList","item","i","_createBlock","key","color","size","rows","__exports__"],"sourceRoot":""}