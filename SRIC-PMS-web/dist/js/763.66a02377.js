"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[763],{9144:function(e,a,s){s.r(a),s.d(a,{default:function(){return h}});var l=s(6768),n=s(4232),r=s(144),t=(s(4114),s(4864)),i=s(1219),d=s(3169),o=s.n(d),u=s(1387),p=s(8374);const g={class:"SignInCard-new-alarm-span"};var m=(0,l.pM)({__name:"SignUpCard",setup(e){const{t:a}=p.A.global,s=(0,u.rd)(),d=(0,r.KR)(!1),m=(0,r.KR)(!1),c=(0,r.KR)("60"),v=(0,r.Kh)({username:"",password:"",passwordRepeat:"",mail:"",code:""}),k=(0,r.KR)(),w=(0,r.Kh)({username:[{required:!0,message:a("rules.username"),trigger:"blur"}],password:[{required:!0,message:a("rules.password"),trigger:"blur"}],passwordRepeat:[{required:!0,message:a("rules.passwordRepeat"),trigger:"blur"}],mail:[{required:!0,message:a("rules.mail"),trigger:"blur"},{type:"email",message:a("rules.mailConfirm"),trigger:"blur"}],code:[{required:!0,message:a("rules.code"),trigger:"blur"}]}),b=async()=>{try{const e=await(0,t.Uh)({mail:v.mail});200==e.data.code?((0,i.nk)({message:a("sign.sendSuccess"),type:"success"}),_()):400==e.data.code?(0,i.nk)({message:a("sign.mailHasBeenUsed"),type:"warning"}):(0,i.nk)({message:a("static.paramsError"),type:"error"}),d.value=!1}catch{}},_=()=>{let e=60;m.value=!0,c.value=`${e}`;const a=setInterval((()=>{e--,c.value=`${e}`,e<=0&&(clearInterval(a),m.value=!1,c.value="60")}),1e3)},y=()=>{const e=/^([a-zA-Z0-9._%+-]+)@([a-zA-Z0-9.-]+\.[a-zA-Z]{2,})$/;e.test(v.mail)?(b(),d.value=!0):(0,i.nk)({message:a("rules.mailConfirm"),type:"warning"})},f=async()=>{try{let e=o().HmacSHA256(v.password,"SRIC"),l=o().enc.Hex.stringify(e);const n={username:v.username,password:l,mail:v.mail,code:v.code},r=await(0,t.Hh)(n);200==r.data.code?((0,i.nk)({message:a("sign.successSignUpMessage"),type:"success"}),s.push("SignIn")):400==r.data.code?(0,i.nk)({message:a("sign.usernameHasBeenUsedMessage"),type:"warning"}):401==r.data.code?(0,i.nk)({message:a("sign.wrongCodeMessage"),type:"warning"}):500==r.data.code?(0,i.nk)({message:a("sign.usernameInvalid"),type:"warning"}):(0,i.nk)({message:a("static.paramsError"),type:"error"})}catch{}},h=async e=>{e&&await e.validate(((e,s)=>{e?v.password==v.passwordRepeat?f():(0,i.nk)({message:a("sign.passwordCommon"),type:"warning"}):console.log("error submit!",s)}))},F=()=>{s.push("SignIn")};return(e,a)=>{const s=(0,l.g2)("el-input"),r=(0,l.g2)("el-form-item"),t=(0,l.g2)("el-button"),i=(0,l.g2)("el-form"),o=(0,l.g2)("el-divider"),u=(0,l.g2)("el-card");return(0,l.uX)(),(0,l.Wv)(u,null,{default:(0,l.k6)((()=>[(0,l.bF)(i,{ref_key:"signUpFormRef",ref:k,model:v,rules:w},{default:(0,l.k6)((()=>[(0,l.bF)(r,{prop:"username"},{label:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("sign.username")),1)])),default:(0,l.k6)((()=>[(0,l.bF)(s,{modelValue:v.username,"onUpdate:modelValue":a[0]||(a[0]=e=>v.username=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(r,{prop:"password"},{label:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("sign.password")),1)])),default:(0,l.k6)((()=>[(0,l.bF)(s,{modelValue:v.password,"onUpdate:modelValue":a[1]||(a[1]=e=>v.password=e),type:"password","show-password":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(r,{prop:"passwordRepeat"},{label:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("sign.repeatPassword")),1)])),default:(0,l.k6)((()=>[(0,l.bF)(s,{modelValue:v.passwordRepeat,"onUpdate:modelValue":a[2]||(a[2]=e=>v.passwordRepeat=e),type:"password","show-password":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(r,{prop:"mail"},{label:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("user.mail")),1)])),default:(0,l.k6)((()=>[(0,l.bF)(s,{modelValue:v.mail,"onUpdate:modelValue":a[3]||(a[3]=e=>v.mail=e),clearable:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(r,{prop:"code"},{label:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("sign.code")),1)])),default:(0,l.k6)((()=>[(0,l.bF)(s,{modelValue:v.code,"onUpdate:modelValue":a[4]||(a[4]=e=>v.code=e),clearable:""},{append:(0,l.k6)((()=>[m.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(t,{key:0,onClick:y,loading:d.value},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("sign.sendCode")),1)])),_:1},8,["loading"])),m.value?((0,l.uX)(),(0,l.Wv)(t,{key:1,disabled:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(c.value)+" S",1)])),_:1})):(0,l.Q3)("",!0)])),_:1},8,["modelValue"])])),_:1}),(0,l.bF)(r,null,{default:(0,l.k6)((()=>[(0,l.bF)(t,{onClick:a[5]||(a[5]=e=>h(k.value)),type:"success",style:{width:"100%"}},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("common.signup")),1)])),_:1})])),_:1})])),_:1},8,["model","rules"]),(0,l.bF)(o),(0,l.Lk)("div",null,[(0,l.Lk)("span",g,(0,n.v_)(e.$t("static.alreadyHave")),1),(0,l.bF)(t,{onClick:F,class:"SignInCard-more-button",type:"primary",link:""},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("common.signin")),1)])),_:1})])])),_:1})}}});const c=m;var v=c;const k={key:0},w={key:1},b={class:"sign-in-hide-title-div"},_={class:"sign-in-hide-title-h1"};var y=(0,l.pM)({__name:"SignUp",setup(e){const a=(0,r.KR)("margin-top:"+(window.innerHeight/2-100)+"px;"),s=(0,r.KR)("margin-top:"+(window.innerHeight/2-350)+"px;"),t=(0,r.KR)(!1),i=()=>{a.value="margin-top:"+(window.innerHeight/2-100)+"px;",s.value="margin-top:"+(window.innerHeight/2-350)+"px;",window.innerWidth<800?t.value=!0:t.value=!1};return i(),window.addEventListener("resize",i),(e,r)=>{const i=(0,l.g2)("el-col"),d=(0,l.g2)("el-row");return(0,l.uX)(),(0,l.CE)(l.FK,null,[t.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.CE)("div",k,[(0,l.bF)(d,null,{default:(0,l.k6)((()=>[(0,l.bF)(i,{span:3}),(0,l.bF)(i,{span:8},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{style:(0,n.Tr)(s.value)},[(0,l.bF)(v)],4)])),_:1}),(0,l.bF)(i,{span:4}),(0,l.bF)(i,{span:7},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{style:(0,n.Tr)(a.value)},[(0,l.Lk)("h1",null,(0,n.v_)(e.$t("static.signupTitle")),1)],4)])),_:1}),(0,l.bF)(i,{span:2})])),_:1})])),t.value?((0,l.uX)(),(0,l.CE)("div",w,[(0,l.Lk)("div",b,[(0,l.Lk)("h1",_,(0,n.v_)(e.$t("static.signinTitle")),1)]),(0,l.Lk)("div",null,[(0,l.bF)(v,{class:"sign-in-hide-card"})])])):(0,l.Q3)("",!0)],64)}}});const f=y;var h=f}}]);
//# sourceMappingURL=763.66a02377.js.map