"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[428],{2458:function(e,t,a){a.d(t,{Iy:function(){return i},U6:function(){return u},Xp:function(){return d},d9:function(){return n},gp:function(){return r},w3:function(){return o},y3:function(){return s}});var l=a(9470);function n(e){return(0,l.Jt)("/notesManage/getNotesManageList",e)}function o(e){return(0,l.bE)("/notesManage/updateNote",e)}function u(e){return(0,l.Jt)("/notes/getNotesListByUser",e)}function r(e){return(0,l.bE)("/notes/addNote",e)}function i(e){return(0,l.bE)("/notes/deleteNote",e)}function s(e){return(0,l.bE)("/notesManage/deleteNoteData",e)}function d(e){return(0,l.bE)("/notes/editNote",e)}},6428:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var l=a(6768),n=a(4232),o=a(144),u=a(2458),r=a(1219),i=a(8374);const s={class:"notes-manage-pagination-div"},d={class:"notes-manage-drawer-title"},c={class:"notes-manage-delete-confirm-div"},m={class:"notes-manage-delete-confirm-text"},g={class:"notes-manage-delete-confirm-title"};var p=(0,l.pM)({__name:"NotesManage",setup(e){const{t:t}=i.A.global,a=(0,o.KR)(""),p=(0,o.KR)([]),k=(0,o.KR)(1),v=(0,o.KR)(0),b=(0,o.KR)(window.innerHeight-280+"px"),f=(0,o.KR)(!1),_=(0,o.KR)(!1),h=(0,o.Kh)({title:"",text:""}),F=(0,o.KR)(),w=(0,o.Kh)({title:[{required:!0,message:t("rules.title"),trigger:"blur"}],text:[{required:!0,message:t("rules.content"),trigger:"blur"}]}),y=(0,o.KR)(""),x=(0,o.KR)(""),C=(0,o.KR)(""),V=async()=>{try{const e={searchInput:a.value,page:k.value},t=await(0,u.d9)(e);v.value=t.data.total,p.value=t.data.notesList}catch{}};(0,l.sV)((()=>{V()}));const $=()=>{V()},K=()=>{V()},W=e=>{h.title=e.title,h.text=e.text,f.value=!0,y.value=e.uuid},R=async()=>{try{const e={uuid:y.value,title:h.title,text:h.text},a=await(0,u.w3)(e);200==a.data.code?(0,r.nk)({message:t("static.submitSuccess"),type:"success"}):400==a.data.code?(0,r.nk)({message:t("static.nameHasBeenUsed"),type:"warning"}):(0,r.nk)({message:t("static.paramsError"),type:"error"}),V(),f.value=!1}catch{}},L=async e=>{e&&await e.validate(((e,t)=>{e?R():console.log("error submit!",t)}))},E=e=>{C.value=e.title,x.value=e.uuid,_.value=!0},N=()=>{x.value="",_.value=!1},U=async()=>{try{const e={uuid:x.value},a=await(0,u.y3)(e);200==a.data.code?(0,r.nk)({message:t("static.deleteSuccess"),type:"success"}):400==a.data.code?(0,r.nk)({message:t("static.deleteFailed"),type:"warning"}):(0,r.nk)({message:t("static.paramsError"),type:"error"}),x.value="",_.value=!1,V()}catch{}},D=()=>{b.value=window.innerHeight-280+"px"};return window.addEventListener("resize",D),(e,t)=>{const o=(0,l.g2)("search"),u=(0,l.g2)("el-icon"),r=(0,l.g2)("el-button"),i=(0,l.g2)("el-input"),y=(0,l.g2)("el-table-column"),x=(0,l.g2)("MessageBox"),V=(0,l.g2)("Delete"),R=(0,l.g2)("el-table"),D=(0,l.g2)("el-pagination"),M=(0,l.g2)("el-card"),z=(0,l.g2)("el-form-item"),B=(0,l.g2)("CircleCheckFilled"),X=(0,l.g2)("el-form"),H=(0,l.g2)("el-drawer");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(M,null,{default:(0,l.k6)((()=>[(0,l.bF)(i,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),placeholder:"search",class:"notes-manage-search-input",clearable:""},{append:(0,l.k6)((()=>[(0,l.bF)(r,{onClick:$},{default:(0,l.k6)((()=>[(0,l.bF)(u,null,{default:(0,l.k6)((()=>[(0,l.bF)(o)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.bF)(R,{data:p.value,height:b.value},{default:(0,l.k6)((()=>[(0,l.bF)(y,{prop:"uuid",width:"200"},{header:(0,l.k6)((()=>[(0,l.eW)(" ID ")])),_:1}),(0,l.bF)(y,{prop:"title",width:"100"},{header:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("common.title")),1)])),_:1}),(0,l.bF)(y,{prop:"text",width:"200"},{header:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("common.content")),1)])),_:1}),(0,l.bF)(y,{prop:"username"},{header:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("static.userBelongs")),1)])),_:1}),(0,l.bF)(y,{prop:"createTime"},{header:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("common.createTime")),1)])),_:1}),(0,l.bF)(y,{prop:"isDeleted",width:"60"},{header:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("common.state")),1)])),default:(0,l.k6)((e=>[0==e.row.isDeleted?((0,l.uX)(),(0,l.Wv)(u,{key:0,style:{color:"#67C23A"}},{default:(0,l.k6)((()=>[(0,l.bF)(x)])),_:1})):(0,l.Q3)("",!0),1==e.row.isDeleted?((0,l.uX)(),(0,l.Wv)(u,{key:1,style:{color:"#F56C6C"}},{default:(0,l.k6)((()=>[(0,l.bF)(V)])),_:1})):(0,l.Q3)("",!0)])),_:1}),(0,l.bF)(y,{fixed:"right",label:"Operations",width:"120"},{header:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("common.operations")),1)])),default:(0,l.k6)((t=>[(0,l.bF)(r,{link:"",type:"primary",onClick:e=>W(t.row)},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("common.edit")),1)])),_:2},1032,["onClick"]),(0,l.bF)(r,{link:"",type:"danger",onClick:e=>E(t.row)},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("common.delete")),1)])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","height"]),(0,l.Lk)("div",s,[(0,l.bF)(D,{layout:"prev, pager, next","current-page":k.value,"onUpdate:currentPage":t[1]||(t[1]=e=>k.value=e),onCurrentChange:t[2]||(t[2]=e=>K()),"page-size":20,total:v.value,"pager-count":5,background:""},null,8,["current-page","total"])])])),_:1}),(0,l.bF)(H,{modelValue:f.value,"onUpdate:modelValue":t[6]||(t[6]=e=>f.value=e)},{header:(0,l.k6)((()=>[(0,l.Lk)("span",d,(0,n.v_)(e.$t("static.editNote")),1)])),default:(0,l.k6)((()=>[(0,l.bF)(X,{ref_key:"notesFormRef",ref:F,model:h,rules:w},{default:(0,l.k6)((()=>[(0,l.bF)(z,{prop:"title"},{default:(0,l.k6)((()=>[(0,l.Lk)("h1",null,(0,n.v_)(e.$t("common.title")),1),(0,l.bF)(i,{modelValue:h.title,"onUpdate:modelValue":t[3]||(t[3]=e=>h.title=e),maxlength:"50","show-word-limit":"",clearable:""},null,8,["modelValue"])])),_:1}),(0,l.bF)(z,{prop:"text"},{default:(0,l.k6)((()=>[(0,l.Lk)("h1",null,(0,n.v_)(e.$t("common.content")),1),(0,l.bF)(i,{modelValue:h.text,"onUpdate:modelValue":t[4]||(t[4]=e=>h.text=e),rows:2,type:"textarea",maxlength:"2500","show-word-limit":"",clearable:"",autosize:{minRows:6}},null,8,["modelValue"])])),_:1}),(0,l.bF)(z,null,{default:(0,l.k6)((()=>[(0,l.bF)(r,{onClick:t[5]||(t[5]=e=>L(F.value)),type:"success"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{class:"notes-manage-submit-button-icon",size:"15"},{default:(0,l.k6)((()=>[(0,l.bF)(B)])),_:1}),(0,l.eW)(" "+(0,n.v_)(e.$t("common.submit")),1)])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"]),(0,l.bF)(H,{modelValue:_.value,"onUpdate:modelValue":t[9]||(t[9]=e=>_.value=e),direction:"ttb"},{header:(0,l.k6)((()=>[(0,l.Lk)("h1",null,(0,n.v_)(e.$t("common.warning")),1)])),default:(0,l.k6)((()=>[(0,l.Lk)("div",c,[(0,l.Lk)("div",m,(0,n.v_)(e.$t("static.reallyToDeleteDataConfirm")),1),(0,l.Lk)("div",g,(0,n.v_)(C.value),1)])])),footer:(0,l.k6)((()=>[(0,l.bF)(r,{type:"info",plain:"",onClick:t[7]||(t[7]=e=>N())},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("common.no")),1)])),_:1}),(0,l.bF)(r,{type:"danger",onClick:t[8]||(t[8]=e=>U())},{default:(0,l.k6)((()=>[(0,l.eW)((0,n.v_)(e.$t("common.yes")),1)])),_:1})])),_:1},8,["modelValue"])],64)}}});const k=p;var v=k}}]);
//# sourceMappingURL=428.87955fd5.js.map